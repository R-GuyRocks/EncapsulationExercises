/*!
 * piStorage
 */
var piStorage=function(){var j=null;function b(n){var o=/http[s]?:\/\/([^:/]+).*/;return n.replace(o,"$1")}try{j=window.localStorage}catch(d){j=undefined}if(j){var a=navigator.userAgent.toLowerCase();if(a.indexOf("safari")!=-1&&a.indexOf("mac")!=-1&&a.indexOf("chrome")==-1){j=undefined}else{var i="__testLocalStorage__";try{j.setItem(i,1);j.removeItem(i)}catch(d){j=undefined}}}var k=function(o,n){return"op."+n+"."+o};var c=function(p){var n=null;try{n=JSON.parse(p);if(!n){n={}}}catch(o){n={}}return n};function m(n){return(/true/i).test(n)}var e=new RegExp("^.*((iPhone; CPU iPhone OS 1[0-2])|(iPad; CPU OS 1[0-2])|(iPod touch; CPU iPhone OS 1[0-2])|(Macintosh; Intel Mac OS X.*Version\/1[0-2].*Safari)|(Macintosh; Intel Mac OS X 10_14.*Version\/1.*Safari)).*$");var h=e.test(navigator.userAgent);var f=function(n,q,p){var o=n+"="+q+";Path=/;Secure;";if(p){o+="Domain="+p+";"}if(!h){o+="SameSite=None;"}return o};var g=function(n){switch(n){case piStorage.PiAccessTokenKey:return"a";case piStorage.PiAccessTokenExpiresInKey:return"b";case piStorage.PiAccessTokenTimestampKey:return"c";case piStorage.PiUserIdKey:return"e";case piStorage.PiRefreshStartedAtKey:return"f";case piStorage.PiHomeCountryCodeKey:return"g";case piStorage.PiSessionIdKey:return"h";case piStorage.PiLangKey:return"i";case piStorage.PiSmsUserIdKey:return"j"}};var l=/op\.([^.]+)\.(.*)/;return{PIAuthKey:"PIAuth",PiAuthSessionKey:"PiAuthSession",PiAuthExpiryTimeKey:"PiAuthExpiryTime",PiLastUserActivityTimeKey:"PiLastUserActivityTime",PiDb:"PiDb",PiAccessTokenKey:"PiAccessToken",PiRefreshTokenKey:"PiRefreshToken",PiAccessTokenExpiresInKey:"PiAccessTokenExpiresIn",PiAccessTokenTimestampKey:"PiAccessTokenTimestamp",PiUserIdKey:"PiUserId",PiSmsUserIdKey:"PiSmsUserId",PiRefreshStartedAtKey:"PiRefreshStartedAt",RootDomainLevel:1,SecondDomainLevel:2,PiIdpLoginUrlKey:"PiIdpLoginUrl",PiIdpPartnerNameKey:"PiIdpPartnerName",PiLastUserActivityTrackerKey:"PiLastUserActivityTracker",PiHomeCountryCodeKey:"PiHomeCountryCode",PiSessionIdKey:"PiSessionId",PiIdpLogoutCallbackKey:"PiIdpLogoutCallback",NoClientId:"*",PiLangKey:"PiLang",skipSameSite:function(){return h},getServer:function(n){var o=/http[s]?:\/\/([^:/]+).*/;return n.replace(o,"$1")},getDomain:function(p){var o=piStorage.getServer(window.location.origin||(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")));if(o=="localhost"){return""}var n=new RegExp("(?:[^.]+.)*?(([^.]+.){0,"+p+"}[^.]+)$");return o.replace(n,"$1")},getCookie:function(p){var o=p+"=";var n=document.cookie.split(";");for(var q=0;q<n.length;q++){var s=n[q];while(s.charAt(0)==" "){s=s.substring(1)}if(s.indexOf(o)!=-1){var r=s.substring(o.length,s.length);if(r.length>1&&r[0]=='"'){r=r.substring(1,r.length-1)}return r}}return null},setCookie:function(n,p,q){if(!q){q=piStorage.SecondDomainLevel}var o=piStorage.getDomain(q);document.cookie=f(n,p,o)},expireCookie:function(n,p){if(!p){p=piStorage.SecondDomainLevel}var o=piStorage.getDomain(p);document.cookie=f(n,"",o)+"expires=Thu, 01-Jan-1970 00:00:01 GMT;"},storeLocally:function(w,u){if(!j){if(w==piStorage.PiLastUserActivityTimeKey){piStorage.setCookie(w,u)}else{var p=piStorage.getCookie(piStorage.PiDb);var s=c(p);var o=w.match(l);var n=o[1];var v=o[2];if(!s[n]){s[n]={}}var t=s[n];var r=g(v);if(r){t[r]=u}if(!(t.a||t.b||t.c||t.e||t.f||t.g||t.h)){delete s[n]}var q=JSON.stringify(s);if(q!=p){piStorage.setCookie(piStorage.PiDb,q)}}return}if(typeof(u)==="undefined"||u===null){j.removeItem(w)}else{j.setItem(w,u)}},getLocally:function(r){if(!j){if(r==piStorage.PiLastUserActivityTimeKey){return piStorage.getCookie(r)}else{var q=piStorage.getCookie(piStorage.PiDb);var p=c(q);var u=r.match(l);var o=u[1];var t=u[2];var n=p[o];if(!n){n={}}var s=g(t);if(n.hasOwnProperty(s)){return n[s]}return null}}return j.getItem(r)},getLocallyForClient:function(o,n){return piStorage.getLocally(k(o,n))},storeLocallyForClient:function(o,p,n){return piStorage.storeLocally(k(o,n),p)},clearAllSessionData:function(){if(j){for(var n in j){if(n.match(l)){j.removeItem(n)}}}else{piStorage.setCookie(piStorage.PiDb,"")}},clearClientSessionData:function(n){var p=new RegExp("op\\.("+n+")\\.(.*)");if(j){for(var r in j){if(r.match(p)){j.removeItem(r)}}}else{var q=piStorage.getCookie(piStorage.PiDb);var o=c(q);if(o[n]){delete o[n]}var s=JSON.stringify(o);if(s!=q){piStorage.setCookie(piStorage.PiDb,s)}}}}}();
