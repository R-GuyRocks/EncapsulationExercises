(window["webpackJsonpone-reader"]=window["webpackJsonpone-reader"]||[]).push([[0],{1103:function(e,t){},1132:function(e,t,a){e.exports=a(1988)},1571:function(e,t){},1577:function(e,t){},1579:function(e,t,a){var n={"./":1580,"./af":701,"./af.js":701,"./agq":702,"./agq.js":702,"./ak":703,"./ak.js":703,"./am":704,"./am.js":704,"./ar":705,"./ar.js":705,"./ars":706,"./ars.js":706,"./as":707,"./as.js":707,"./asa":708,"./asa.js":708,"./ast":709,"./ast.js":709,"./az":710,"./az.js":710,"./bas":711,"./bas.js":711,"./be":712,"./be.js":712,"./bem":713,"./bem.js":713,"./bez":714,"./bez.js":714,"./bg":715,"./bg.js":715,"./bh":716,"./bh.js":716,"./bm":717,"./bm.js":717,"./bn":718,"./bn.js":718,"./bo":719,"./bo.js":719,"./br":720,"./br.js":720,"./brx":721,"./brx.js":721,"./bs":722,"./bs.js":722,"./ca":723,"./ca.js":723,"./ccp":724,"./ccp.js":724,"./ce":725,"./ce.js":725,"./cgg":726,"./cgg.js":726,"./chr":727,"./chr.js":727,"./ckb":728,"./ckb.js":728,"./cs":729,"./cs.js":729,"./cu":730,"./cu.js":730,"./cy":731,"./cy.js":731,"./da":732,"./da.js":732,"./dav":733,"./dav.js":733,"./de":734,"./de.js":734,"./dje":735,"./dje.js":735,"./dsb":736,"./dsb.js":736,"./dua":737,"./dua.js":737,"./dv":738,"./dv.js":738,"./dyo":739,"./dyo.js":739,"./dz":740,"./dz.js":740,"./ebu":741,"./ebu.js":741,"./ee":742,"./ee.js":742,"./el":743,"./el.js":743,"./en":744,"./en.js":744,"./eo":745,"./eo.js":745,"./es":746,"./es.js":746,"./et":747,"./et.js":747,"./eu":748,"./eu.js":748,"./ewo":749,"./ewo.js":749,"./fa":750,"./fa.js":750,"./ff":751,"./ff.js":751,"./fi":752,"./fi.js":752,"./fil":753,"./fil.js":753,"./fo":754,"./fo.js":754,"./fr":755,"./fr.js":755,"./fur":756,"./fur.js":756,"./fy":757,"./fy.js":757,"./ga":758,"./ga.js":758,"./gd":759,"./gd.js":759,"./gl":760,"./gl.js":760,"./gsw":761,"./gsw.js":761,"./gu":762,"./gu.js":762,"./guw":763,"./guw.js":763,"./guz":764,"./guz.js":764,"./gv":765,"./gv.js":765,"./ha":766,"./ha.js":766,"./haw":767,"./haw.js":767,"./he":768,"./he.js":768,"./hi":769,"./hi.js":769,"./hr":770,"./hr.js":770,"./hsb":771,"./hsb.js":771,"./hu":772,"./hu.js":772,"./hy":773,"./hy.js":773,"./ia":774,"./ia.js":774,"./id":775,"./id.js":775,"./ig":776,"./ig.js":776,"./ii":777,"./ii.js":777,"./in":778,"./in.js":778,"./index":1581,"./index.js":1582,"./io":779,"./io.js":779,"./is":780,"./is.js":780,"./it":781,"./it.js":781,"./iu":782,"./iu.js":782,"./iw":783,"./iw.js":783,"./ja":784,"./ja.js":784,"./jbo":785,"./jbo.js":785,"./jgo":786,"./jgo.js":786,"./ji":787,"./ji.js":787,"./jmc":788,"./jmc.js":788,"./jv":789,"./jv.js":789,"./jw":790,"./jw.js":790,"./ka":791,"./ka.js":791,"./kab":792,"./kab.js":792,"./kaj":793,"./kaj.js":793,"./kam":794,"./kam.js":794,"./kcg":795,"./kcg.js":795,"./kde":796,"./kde.js":796,"./kea":797,"./kea.js":797,"./khq":798,"./khq.js":798,"./ki":799,"./ki.js":799,"./kk":800,"./kk.js":800,"./kkj":801,"./kkj.js":801,"./kl":802,"./kl.js":802,"./kln":803,"./kln.js":803,"./km":804,"./km.js":804,"./kn":805,"./kn.js":805,"./ko":806,"./ko.js":806,"./kok":807,"./kok.js":807,"./ks":808,"./ks.js":808,"./ksb":809,"./ksb.js":809,"./ksf":810,"./ksf.js":810,"./ksh":811,"./ksh.js":811,"./ku":812,"./ku.js":812,"./kw":813,"./kw.js":813,"./ky":814,"./ky.js":814,"./lag":815,"./lag.js":815,"./lb":816,"./lb.js":816,"./lg":817,"./lg.js":817,"./lkt":818,"./lkt.js":818,"./ln":819,"./ln.js":819,"./lo":820,"./lo.js":820,"./lrc":821,"./lrc.js":821,"./lt":822,"./lt.js":822,"./lu":823,"./lu.js":823,"./luo":824,"./luo.js":824,"./luy":825,"./luy.js":825,"./lv":826,"./lv.js":826,"./mas":827,"./mas.js":827,"./mer":828,"./mer.js":828,"./mfe":829,"./mfe.js":829,"./mg":830,"./mg.js":830,"./mgh":831,"./mgh.js":831,"./mgo":832,"./mgo.js":832,"./mi":833,"./mi.js":833,"./mk":834,"./mk.js":834,"./ml":835,"./ml.js":835,"./mn":836,"./mn.js":836,"./mo":837,"./mo.js":837,"./mr":838,"./mr.js":838,"./ms":839,"./ms.js":839,"./mt":840,"./mt.js":840,"./mua":841,"./mua.js":841,"./my":842,"./my.js":842,"./mzn":843,"./mzn.js":843,"./nah":844,"./nah.js":844,"./naq":845,"./naq.js":845,"./nb":846,"./nb.js":846,"./nd":847,"./nd.js":847,"./nds":848,"./nds.js":848,"./ne":849,"./ne.js":849,"./nl":850,"./nl.js":850,"./nmg":851,"./nmg.js":851,"./nn":852,"./nn.js":852,"./nnh":853,"./nnh.js":853,"./no":854,"./no.js":854,"./nqo":855,"./nqo.js":855,"./nr":856,"./nr.js":856,"./nso":857,"./nso.js":857,"./nus":858,"./nus.js":858,"./ny":859,"./ny.js":859,"./nyn":860,"./nyn.js":860,"./om":861,"./om.js":861,"./or":862,"./or.js":862,"./os":863,"./os.js":863,"./pa":864,"./pa.js":864,"./pap":865,"./pap.js":865,"./pl":866,"./pl.js":866,"./prg":867,"./prg.js":867,"./ps":868,"./ps.js":868,"./pt":869,"./pt.js":869,"./qu":870,"./qu.js":870,"./rm":871,"./rm.js":871,"./rn":872,"./rn.js":872,"./ro":873,"./ro.js":873,"./rof":874,"./rof.js":874,"./ru":875,"./ru.js":875,"./rw":876,"./rw.js":876,"./rwk":877,"./rwk.js":877,"./sah":878,"./sah.js":878,"./saq":879,"./saq.js":879,"./sbp":880,"./sbp.js":880,"./sc":881,"./sc.js":881,"./scn":882,"./scn.js":882,"./sd":883,"./sd.js":883,"./sdh":884,"./sdh.js":884,"./se":885,"./se.js":885,"./seh":886,"./seh.js":886,"./ses":887,"./ses.js":887,"./sg":888,"./sg.js":888,"./sh":889,"./sh.js":889,"./shi":890,"./shi.js":890,"./si":891,"./si.js":891,"./sk":892,"./sk.js":892,"./sl":893,"./sl.js":893,"./sma":894,"./sma.js":894,"./smi":895,"./smi.js":895,"./smj":896,"./smj.js":896,"./smn":897,"./smn.js":897,"./sms":898,"./sms.js":898,"./sn":899,"./sn.js":899,"./so":900,"./so.js":900,"./sq":901,"./sq.js":901,"./sr":902,"./sr.js":902,"./ss":903,"./ss.js":903,"./ssy":904,"./ssy.js":904,"./st":905,"./st.js":905,"./sv":906,"./sv.js":906,"./sw":907,"./sw.js":907,"./syr":908,"./syr.js":908,"./ta":909,"./ta.js":909,"./te":910,"./te.js":910,"./teo":911,"./teo.js":911,"./tg":912,"./tg.js":912,"./th":913,"./th.js":913,"./ti":914,"./ti.js":914,"./tig":915,"./tig.js":915,"./tk":916,"./tk.js":916,"./tl":917,"./tl.js":917,"./tn":918,"./tn.js":918,"./to":919,"./to.js":919,"./tr":920,"./tr.js":920,"./ts":921,"./ts.js":921,"./tt":922,"./tt.js":922,"./twq":923,"./twq.js":923,"./tzm":924,"./tzm.js":924,"./ug":925,"./ug.js":925,"./uk":926,"./uk.js":926,"./ur":927,"./ur.js":927,"./uz":928,"./uz.js":928,"./vai":929,"./vai.js":929,"./ve":930,"./ve.js":930,"./vi":931,"./vi.js":931,"./vo":932,"./vo.js":932,"./vun":933,"./vun.js":933,"./wa":934,"./wa.js":934,"./wae":935,"./wae.js":935,"./wo":936,"./wo.js":936,"./xh":937,"./xh.js":937,"./xog":938,"./xog.js":938,"./yav":939,"./yav.js":939,"./yi":940,"./yi.js":940,"./yo":941,"./yo.js":941,"./yue":942,"./yue.js":942,"./zgh":943,"./zgh.js":943,"./zh":944,"./zh.js":944,"./zu":945,"./zu.js":945};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=1579},1580:function(e,t){},1581:function(e,t){},1582:function(e,t){},1922:function(e,t,a){},1947:function(e,t){},1965:function(e,t,a){},1986:function(e,t,a){},1988:function(e,t,a){"use strict";a.r(t);a(1133),a(1335),a(1343);var n,o,r=a(0),s=a.n(r),i=a(19),c=a.n(i),l=a(14),u=a(16),d=a(24),p=a(23),g=a(400),m=a(2008),h=a(256),f=a(79),E=a(8),b=Object(r.createContext)(),y=a(2),T="ETEXT_PDF",I={FLV_FORMAT:"flv",SWF_FORMAT:"swf"},S={AUDIO_TEXT_SYNCH:10,CHROMELESS_URL:15,EMAIL:8,FACELESSAUDIO:12,FLV:2,GLOSSARY_TERM:3,H264:13,IMAGE:1,IPADAPP:14,JAZZASSET:16,LTILINK:11,MP3:4,PAGE_NUMBER:5,SWF:6,URL:7,VIRTUAL_LEARNING_ASSET:9},v={DEFAULT_ROLE:"all",DEFAULT_ROLE_ID:1,INSTRUCTOR:"instructor",INSTRUCTOR_ID:3,STUDENT:"student",STUDENT_ID:2},C=y.e.model("CourseDetails",{courseId:y.e.maybeNull(y.e.string),courseType:y.e.maybeNull(y.e.string),customCourseName:y.e.maybeNull(y.e.string),customCourseId:y.e.maybeNull(y.e.string),parsedCourseId:y.e.maybeNull(y.e.string)}),O=y.e.model("Book",{active:y.e.boolean,bookId:y.e.string,courseDetailsList:y.e.maybeNull(y.e.array(C)),creator:y.e.maybeNull(y.e.string),description:y.e.maybeNull(y.e.string),et1CourseDetailsList:y.e.maybeNull(y.e.array(C)),expired:y.e.boolean,iseT1:y.e.boolean,subscriptionURL:y.e.maybeNull(y.e.string),title:y.e.string,thumbnailImageUrl:y.e.maybeNull(y.e.string),toc:y.e.optional(y.e.array(y.e.string),[])}),P=y.e.model("Section",{bookTitle:y.e.maybeNull(y.e.string),sectionId:y.e.maybeNull(y.e.string),sectionTitle:y.e.maybeNull(y.e.string),courseType:y.e.maybeNull(y.e.string),avatarUrl:y.e.maybeNull(y.e.string),productCodes:y.e.optional(y.e.array(y.e.string),[])}),N=y.e.model("CourseSection",{authorName:y.e.maybeNull(y.e.string),expired:y.e.boolean,section:y.e.maybeNull(y.e.compose(P)),status:y.e.maybeNull(y.e.string)}),k=y.e.model("Bookshelf",{entries:y.e.maybeNull(y.e.array(O)),userCourseSectionEntries:y.e.maybeNull(y.e.array(N))}).views((function(e){return{getBookData:function(){var t=[],a=e.entries,n=e.userCourseSectionEntries;return a.concat(n).forEach((function(e,a){var n=e.thumbnailImageUrl||"",o=e&&e.section||"",r=!1;e&&e.section&&e.section.sectionId&&(r=!0),n=n?n.replace("http","https"):"",t.push({author:e.creator||"",courseId:o.sectionId||"",courseName:o.sectionTitle||"",description:e.description||"",expired:e.expired||"",id:e.bookId||o.productCodes||"",image:n||o.avatarUrl||"",iseT1:e.iseT1||!1,key:a.toString(),subscriptionURL:e.subscriptionURL||"",title:e.title||e.bookTitle||"",tocId:"",isFromStandalone:r});var s=e&&e.courseDetailsList||e&&e.et1CourseDetailsList||"";s.length>0&&s.forEach((function(a){var o={};o.id=e.bookId,o.image=n,o.courseId=a.parsedCourseId,o.courseName=a.customCourseName,t.push(o)}))})),t}}})).actions((function(e){return{fetch:function(){E.f.getEventManager().publish("BOOKSHELF_DATA_REQUESTED",{})},set:function(t){e.entries=t.entries,e.userCourseSectionEntries=t.userCourseSectionEntries,E.f.getEventManager().publish("BOOKSHELF_DATA_FETCHED",{})}}})),_=a(59),A=a(1105),j=a(954),R=a(68),U=a(165),L=a(6),D=a(528),w=a(99),M=a(530),B=a(531),x=a(965),F=a(955),H=function(){var e=E.f.getStoreRegistry().getStore("user").id;w.EventProvider.getEventManager().dispatch({category:"logout",action:"Click",label:e}),E.f.logout()},G=E.f.getStoreRegistry().getStore("user"),V=E.f.getStoreRegistry().getStore("language"),z=Object(D.a)({root:{paddingBottom:"24px"},divider:{margin:"0px 24px"},action:{display:"flex",justifyContent:"center",paddingTop:"24px",paddingBottom:"20px"}}),W=function(e){var t=e.avatarText,a=z();return s.a.createElement(M.a,null,s.a.createElement(B.a,{classes:a},s.a.createElement(f.ProfileDisplay,{id:"my-profile-display",avatarText:t,name:G.fullName,email:G.email})),s.a.createElement(x.a,{className:a.divider}),s.a.createElement(B.a,{className:a.action},s.a.createElement(F.a,{variant:"outlined",color:"primary",onClick:H},V.getMessage("common.LOGOUT"))))},Y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(){n.setState((function(e){return{open:!e.open}}))},n.handleClose=function(){},n.getUserInitial=function(e){var t="";if(e&&e.fullName){var a=e.fullName[0]?e.fullName[0]:null;t=a?a.toUpperCase():""}return t},n.state={open:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.open,t=E.f.getStoreRegistry().getStore("language"),a=this.props.classes,n=E.f.getStoreRegistry().getStore("user"),o=this.getUserInitial(n);return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:a.header,role:"banner"},s.a.createElement("div",{className:a.headerIcons},s.a.createElement("div",{className:a.pearsonIcon},s.a.createElement(f.PearsonLogo,{style:{fontSize:49},color:"secondary"})),s.a.createElement("div",{className:a.headerTitle},s.a.createElement(R.a,{variant:"h1",className:a.title},t.getMessage("bookshelf.TITLE"))),s.a.createElement("div",null,s.a.createElement(U.a,{className:a.avatarIcon},s.a.createElement(f.ProfileDropdown,{id:"profile-dropdown","aria-label":t.getMessage("common.LOGOUT"),text:o,color:"secondary",open:e,onChange:this.handleChange},s.a.createElement(W,{onClose:this.handleClose,avatarText:o})))))))}}]),a}(r.Component),Q=Object(L.a)({header:{backgroundImage:"radial-gradient(\n      circle at 50% 100%,\n      #00819e, #00749b 9%,\n      #005d83 15%,\n      #004d75 19%,\n      #002e60 32%)"},headerIcons:{display:"inline-flex",justifyItems:"flex-start",width:"100%"},pearsonIcon:{padding:"50px 40px",boxSizing:"border-box",width:"8%"},avatarIcon:{padding:"43px 30px",boxSizing:"border-box",marginLeft:"auto",boxShadow:"none",backgroundColor:"rgba(0, 0, 0, 0)"},headerTitle:{width:"80%",padding:"55px 40px"},title:{fontSize:"30px",textAlign:"center",color:"#f5f5f5"}})(Y),X=a(44),q={ENVIRONMENT:"stg",PARTNER_ENV:"stg",AUDIO_BOOK_API_BASE_URL:"https://readerplus-resources.s3.amazonaws.com/etext/dev/audiobklist.json",CSG_API_BASE_URL:"https://content-service.stg-prsn.com/csg/api/v3",MARIN_API_BASE_URL:"https://etext-ise-stg.pearson.com/marin/api/1.0",PRISM_API_BASE_URL:"https://prism-stg.pearsoned.com/api",PAPER_API_BASE_URL:"https://paperapi.stg-openclass.com/nextext-api/api/platforms/bookshelf",STPAPER_API_BASE_URL:"https://stpaperapi.stg-prsn.com/etext/v2",SPECTRUM_API_BASE_URL:"https://spectrum-stg.pearsoned.com/api/v1",IDC_API_BASE_URL:"https://etext-instructor-stg.pearson.com/idc-api/",ETEXT_API_BASE_URL:"https://etext-stg.pearson.com/api/nextext-api/v1/api",AUDIO_BOOK_API_TIMEOUT:1e4,CSG_API_TIMEOUT:1e4,MARIN_API_TIMEOUT:1e4,PRISM_API_TIMEOUT:1e4,STPAPER_API_TIMEOUT:2e4,SPECTRUM_API_TIMEOUT:1e4,IDC_API_TIMEOUT:1e4,ETEXT_API_TIMEOUT:1e4,PRODUCT:"eText",BROWSER_REQUIREMENTS_URL:"https://www.pearson.com/us/higher-education/products-services-teaching/course-content/textbooks-and-etexts/pearson-etext/system-requirements.html",CLIENT_ID:"29s6iaLv3PblrAbzCP9kHlFY5ntGeNN7",GTM_CONTAINER_ID:"GTM-K926DKV",GTM_AUTH:"zUb9DpXcGh8kY6sa1JMpug",GTM_PREVIEW:"env-77",PSEUDO_LOCALE_CODE:"pt",CONSOLE_URL:"https://console-stg.pearson.com",ZEPPELIN_URL:"https://zeppelin.stg-openclass.com/products",TENANT_ID_ETEXT:"30258aed-46bb-4ec5-909e-ecea2431772b",TENANT_KEY_ETEXT:"6551b60c-b521-4949-be3a-1be09d8ede6f",TENANT_KEY_ETEXT_PDF:"99213166-fa87-4f5a-be36-9aaf5bbe5c5e",CONTENT_HOST:"https://".concat(window.location.host),PXE_BASE_PATH:"eps/pearson-reader/api/item",CITE_BASE_PATH:"eps/sanvan/api/item",COLLECTIONS_BASE_PATH:"eps/bluesky/api/item",PXE_X_CALLER:"f50674e2-3416-11e8-b467-0ed5f89f718b",CITE_X_CALLER:"b2ceee88-d75e-11e8-9f8b-f2801f1b9fd1"},K={ENVIRONMENT:"local",CONTENT_HOST:"https://epspqa.stg-openclass.com",PXE_BASE_PATH:"pearson-reader/api/item",MARIN_API_BASE_URL:"https://marin-api.dev-prsn.com/api/1.0"},Z={ENVIRONMENT:"dev",MARIN_API_BASE_URL:"https://marin-api.dev-prsn.com/api/1.0"},J={ENVIRONMENT:"qaInt",PARTNER_ENV:"qaInt",GTM_AUTH:"7ZdPSwkMvm76O-E2mvzeew",GTM_PREVIEW:"env-78",CONSOLE_URL:"https://console-qa.pearsoned.com",PRISM_API_BASE_URL:"https://prism-qa.pearsoned.com/",MARIN_API_BASE_URL:"https://etext-ise-qa-int.pearson.com/marin/api/1.0",STPAPER_API_BASE_URL:"https://stpaperapiqa.stg-prsn.com/etext/v2",ZEPPELIN_URL:"https://zeppelin-qa.dev-openclass.com/products",TENANT_ID_ETEXT:"2b4af3fc-97b4-41a3-af7e-bc9354d35fed",TENANT_KEY_ETEXT:"b269bd19-e475-41fe-b17e-ea9e33041d91",TENANT_KEY_ETEXT_PDF:"99213166-fa87-4f5a-be36-9aaf5bbe5c5e"},$={GTM_AUTH:"XWOKKQGA9Y47y_NPmgF1-A",GTM_PREVIEW:"env-79",TENANT_KEY_ETEXT_PDF:"a7a95b0e-6294-4588-9ee2-87767bbecb05"},ee={ENVIRONMENT:"prod",PARTNER_ENV:"prod",GTM_AUTH:"3qg9z-iB_CDyYPiJkSJYTw",GTM_PREVIEW:"env-2",AUDIO_BOOK_API_BASE_URL:"https://readerplus-resources.s3.amazonaws.com/etext/prd/audiobklist.json",CSG_API_BASE_URL:"https://content-service.prd-prsn.com/csg/api/v3",PAPER_API_BASE_URL:"https://paperapi.openclass.com/nextext-api/api/platforms/bookshelf",PRISM_API_BASE_URL:"https://prism.pearsoned.com/api",SPECTRUM_API_BASE_URL:"https://spectrum.openclass.com/api/v1",STPAPER_API_BASE_URL:"https://stpaperapi.prd-prsn.com/etext/v2",MARIN_API_BASE_URL:"https://etext-ise.pearson.com/marin/api/1.0",ETEXT_API_BASE_URL:"https://etext.pearson.com/api/nextext-api/v1/api",IDC_API_BASE_URL:"https://etext-instructor.pearson.com/idc-api/",PSEUDO_LOCALE_CODE:null,CLIENT_ID:"Znm0ClWyL6CAbHM6H4iM99DPBEt1ALYz",ZEPPELIN_URL:"https://product-transaction.openclass.com/products",CONSOLE_URL:"https://console.pearson.com",TENANT_ID_ETEXT:"beeea450-02f6-4f88-842e-cec9364453b7",TENANT_KEY_ETEXT:"4f0fbc0b-2a5a-4382-90c4-d8ecbba99158",TENANT_KEY_ETEXT_PDF:"bb0a1d97-78af-44e4-bfe4-810c535a45c0",PXE_X_CALLER:"a66ec434-c1d5-4ce6-864c-70121c11524c",CITE_X_CALLER:"b45676f0-d77b-11e8-9f8b-f2801f1b9fd1"},te={};switch(window.location.hostname){case"localhost":case"local-dev.pearson.com":n=K,o=te;break;case"ise-dev.dev-prsn.com":case"ise-dev.pearson.com":case"etext-ise-dev.pearson.com":n=Z,o=te;break;case"etext-ise-qa.pearson.com":n=$,o=te;break;case"etext-ise-qa-int.pearson.com":n=J,o=te;break;case"etext-ise-stg.pearson.com":n=$,o=te;break;case"etext-ise.pearson.com":n=ee,o=te;break;default:n=$,o=te}var ae,ne=Object(X.a)(Object(X.a)(Object(X.a)({},q),o),n),oe=Object(_.b)("user","language","bookshelfStatus","bookshelf")(ae=Object(_.c)(ae=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).isReadyToRender=function(){var e=n.props.bookshelfStatus,t=E.f.getStoreRegistry().getStore("user").id;return n.dataFetched&&!e.isPending&&t},n.handleBookClick=function(e){var t=n.props.match,a=t.url,o=e.id,r=e.courseId,s=E.f.getStoreRegistry().getStore("user"),i=s.username,c=s.smsUserId,l="redirectURL=".concat(ne.CONTENT_HOST,"/bookshelf");a.indexOf("/bookshelf")>-1&&(a=t.url.split("/bookshelf")[0]),e.isFromStandalone?E.f.redirectTo("".concat(a,"/courses/").concat(r,"?").concat(l)):o&&r?E.f.redirectTo("".concat(a,"/courses/").concat(r,"/products/").concat(o,"?").concat(l)):window.open("".concat(ne.PAPER_API_BASE_URL,"?custom_bookid=").concat(o,"&custom_person_id=").concat(i,"&custom_smsid=").concat(c),"_self")},n.dataFetched=!1,n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.bookshelf;E.f.getEventManager().on("BOOKSHELF_DATA_FETCHED",(function(){e.dataFetched=!0})),t.fetch()}},{key:"render",value:function(){var e=this.props,t=e.bookshelf,a=e.bookshelfStatus,n=e.language;return s.a.createElement(r.Fragment,null,s.a.createElement(Q,null),s.a.createElement(E.d,{loading:a.isPending,isError:a.isError,error:a.error,content:this.isReadyToRender()&&s.a.createElement(A.BookshelfComponent,{books:t.getBookData(),onBookClick:this.handleBookClick,locale:n.currentLanguage}),loadingContent:s.a.createElement(j.a,{className:"circleStyle"}),errorContent:s.a.createElement(E.c,{errorCode:"GENERIC"})}))}}]),a}(r.Component))||ae)||ae,re={path:"/bookshelf",exact:!0,services:[new(function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"BOOKSHELF_DATA_REQUESTED","bookshelfStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(){return this.getClient("stpaper").get("/courseboot/convergedreader/compositeBookShelf",{headers:{includeRegistrar:!0}})}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("bookshelf").set(e.data)}}]),a}(E.a))],stores:[{name:"bookshelf",spec:k,saveLocally:!1,initialState:{entries:[{active:!0,bookId:"",creator:"",courseDetailsList:[{courseId:"",courseType:"",customCourseName:"",customCourseId:"",parsedCourseId:""}],description:"",et1CourseDetailsList:[{courseId:"",courseType:"",customCourseName:"",customCourseId:"",parsedCourseId:""}],expired:!1,iseT1:!0,subscriptionURL:"",title:"",thumbnailImageUrl:"",toc:[]}],userCourseSectionEntries:[{authorName:"",expired:!1,section:{sectionId:"",sectionTitle:"",courseType:"",avatarUrl:"",productCodes:[]},status:""}]}}],render:function(e){return s.a.createElement(oe,e)}},se=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"AUDIO_BOOK_REQUESTED","audioBookStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(){return this.getClient("audioBook").get()}},{key:"handleResponse",value:function(e,t){if(e.data){var a=!1;E.e.treeWalk(e.data.audioBookList,null,"",-1,(function(e){return e.bookId!==t.bookId||(a=!0,!1)})),E.f.getStoreRegistry().getStore("audioBooks").set({isAudioBook:a})}}},{key:"handleError",value:function(){E.f.getStoreRegistry().getStore("audioBooks").set({isAudioBook:!1})}}]),a}(E.a),ie=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"COURSE_SYNC_REQUESTED","courseStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){var a=t.productId?"/products/".concat(t.productId):"",n=null;return t.bundleId&&(n={headers:{"bundle-id":t.bundleId}}),this.getClient("marin").get("/courses/".concat(t.courseId).concat(a),n)}},{key:"handleResponse",value:function(e,t){E.f.getStoreRegistry().getStore("course").set(e.data,t.bundleId)}}]),a}(E.a),ce=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"ASSET_REQUESTED","assetStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){var a=t.courseId?"&id=".concat(t.courseId):"";return t.bundleId?this.getClient("prism").get("/contenttoc/v1/assets/da?bundleId=".concat(t.bundleId)):this.getClient("prism").get("/contenttoc/v1/assets?productId=".concat(t.productId).concat(a))}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("asset").set(e.data)}}]),a}(E.a),le=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"ASSIGNMENT_REQUESTED","assignmentStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){return this.getClient("marin").get("/courses/".concat(t.courseId,"/assignments?expand=true"))}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("assignments").set(e.data)}},{key:"handleError",value:function(e){E.f.getStoreRegistry().getStore("assignments").setAssignmentsAsEmpty(e)}}]),a}(E.a),ue=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"tocData",value:function(t,a){var n=[],o=null,r="",s="";t&&t.forEach((function(t){if(!t.part){t.level=1;var a=e.isAudioAvailableInChapter(function e(t,a){var n=t,i=n.href||n.uri||"";-1!==["assessment","tdx","cite-assessment"].indexOf(n.type)&&(r=n.uri);var c=i&&i.indexOf("/OPS/"),l=c>=0?i.substr(c,i.length):i,u={id:n.id,title:n.title||n.label,type:n.type||"",urn:n.id||n.path,href:l,chapterId:a,coPage:"true"===n.coPage,playOrder:n.playOrder,assessmentId:r,audio:o,parentItemId:s,children:[],label:n.level?String(n.level):"",display:!1!==n.display,hidden:n.hidden};1===n.level&&n.optional&&(u.optional=n.optional);var d=n.items||n.children||n.content;return d&&d.forEach((function(t){s=u.id,t.level=n.level+1,(t.uri||t.children||t.items)&&u.children.push(e(t,a))})),s="",o=null,u}(t,t.id));n.push(a)}}));var i=[],c=n.filter((function(e){return e.optional&&i.push(e),!e.optional})),l={id:a,list:c=Array.prototype.concat.apply(c,i)};return{tocData:l}}}]),e}();ue.isAudioAvailableInChapter=function(e){var t=e.children&&e.children.find((function(e){return e.audio}));return e.isAudioAvailableInChapter=Boolean(t),e},ue.setManifest=function(e){ue.manifest=e},ue.getManifest=function(){return ue.manifest?ue.manifest:null};var de=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"MANIFEST_REQUESTED","manifestStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){return"CITE"===t.contentType?this.getClient("stpaper").get("/courseboot/contextId/".concat(t.courseId,"/productId/").concat(t.productId,"/citeManifest")):t.isBundled?this.getClient("etext").get("nextext/custom/toc/contextId/".concat(t.courseId),{params:{provider:t.tocProvider}}):this.getClient("stpaper").get("/courseboot/toc/contextId/".concat(t.courseId))}},{key:"handleResponse",value:function(e){ue.setManifest(e.data),e.data&&E.f.getStoreRegistry().getStore("courseContainerState").set({showConfigToc:!0})}},{key:"handleError",value:function(){E.f.getStoreRegistry().getStore("courseContainerState").set({showConfigToc:!1})}}]),a}(E.a),pe=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"CUSTOM_TOC_PUBLISH_REQUESTED","customTocStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){var a={headers:{productType:t.model}};return t.isBundled&&(a.headers.smsToken=t.smsToken,"ETEXT2_CITE"===t.model&&(a.headers.productCode=t.productId)),this.getClient("idc").put("course/".concat(t.courseId,"/publish"),t.changedTocData,a)}},{key:"handleResponse",value:function(e,t){e&&(E.f.getEventManager().publish("ASSET_REQUESTED",{productId:t.productId,courseId:t.courseId}),E.f.getStoreRegistry().getStore("courseContainerState").set({showSuccessMsg:!0}))}},{key:"handleError",value:function(){E.f.getStoreRegistry().getStore("courseContainerState").set({showSuccessMsg:!1})}}]),a}(E.a),ge=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"RESET_TOC_REQUESTED;","resetTocStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){return"CITE"===t.contentType?this.getClient("stpaper").delete("/courseboot/contextId/".concat(t.courseId,"/productId/").concat(t.productId,"/citeManifest"),{headers:{productType:t.contentType}}):this.getClient("etext").get("nextext/custom/toc/contextId/".concat(t.productId),{params:{provider:t.tocProvider}})}},{key:"handleResponse",value:function(e,t){var a=this,n=E.f.getStoreRegistry().getStore("course");"CITE"===t.contentType?this.fetchAsset(t):this.getClient("etext").put("nextext/custom/contextId/".concat(t.courseId),e.data.content,{headers:{productType:n.getProduct().model},params:{provider:t.tocProvider}}).then((function(e){e&&a.fetchAsset(t)}),(function(e){return e}))}},{key:"handleError",value:function(){E.f.getStoreRegistry().getStore("courseContainerState").set({showSuccessMsg:!1})}},{key:"fetchAsset",value:function(e){var t=E.f.getStoreRegistry().getStore("courseContainerState");E.f.getEventManager().publish("ASSET_REQUESTED",{productId:e.productId,courseId:e.courseId}),t.set({showSuccessMsg:!0})}}]),a}(E.a),me=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"ucFirst",value:function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}}]),e}(),he=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this,"AUTOBAHN_TIMEONTASK")).createPayload=function(e,t,a,n,o,r,s,i){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=o&&o.role&&me.ucFirst(o.role),d={originatingSystemCode:ne.PRODUCT.toUpperCase(),activities:[{messageTypeCode:e,messageVersion:"UserLoadsContent"===e?"1.6.0":"1.8.0",namespace:"common",payload:{accessedUsingAppId:"WebApp",appActivityAreaCode:"Learning",appId:ne.PRODUCT&&ne.PRODUCT.toLowerCase(),contentId:t,contentIdType:ne.PRODUCT.toLowerCase(),datetimeSourceCode:"Client",deviceType:"Desktop",environmentCode:ne.ENVIRONMENT.toUpperCase(),loadDt:a,messageId:"UserLoadsContent"===e?n:E.e.uuid(),messageTransferType:"LiveStream",messageTypeCode:e,messageVersion:"UserLoadsContent"===e?"1.6.0":"1.8.0",namespaceCode:me.ucFirst("common"),operatingSystemCode:window.navigator.platform,originatingSystemCode:ne.PRODUCT.toUpperCase(),organizationIdType:"Organization",personId:r,personIdType:"PI",personRoleCode:u,transactionDt:l||a,timeCategorization:"Learning",timeOnTaskUuid:n,userAgent:window.navigator.userAgent}}]};return i&&(d.activities[0].payload.courseId=o&&o.id,d.activities[0].payload.courseSectionId=o&&o.id,d.activities[0].payload.courseIdType=s?"SMS":"Registrar",d.activities[0].payload.courseSectionIdType=s?"SMS":"Registrar",d.activities[0].payload.organizationId=o&&o.organizationId||"NotAvailable"),"UserLoadsContent"!==e&&(d.activities[0].payload.unloadDt=l,d.activities[0].payload.unloadTimestampActivityCode="Unload",d.activities[0].payload.unloadCausedByCode=u),""!==c&&(d.activities[0].payload.businessModelCode=c,"directToLearner"!==c&&"directToLearnerRenewal"!==c||(d.activities[0].payload.personRoleCode="Learner","UserLoadsContent"!==e&&(d.activities[0].payload.unloadCausedByCode="Learner"))),d},e.loadDate="",e.loadUuid="",e}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){var a="",n=t.type,o=t.pageId,r=t.course,s=t.product,i=t.userId,c=t.isBundled,l=t.isFromCourse,u=t.businessModelCode;"UserLoadsContent"===n?(this.loadUuid=E.e.uuid(),this.loadDate=(new Date).toISOString()):a=(new Date).toISOString();var d=l?r:s,p=this.createPayload(n,o,this.loadDate,this.loadUuid,d,i,c,l,u,a);return this.getClient("stpaper").post("/courseboot/pla/autobahn/messages/pageLoadUnload",p)}}]),a}(E.a),fe=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"COURSE_COLLECTION_REQUESTED")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){return this.getClient("stpaper").get("/courseboot/courseId/".concat(t.courseId,"/productId/").concat(t.productId,"/details"))}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("courseItems").set({items:e.data})}}]),a}(E.a),Ee=y.e.model("AudioBooks",{isAudioBook:y.e.optional(y.e.boolean,!1)}).actions((function(e){return{fetch:function(e){E.f.getEventManager().publish("AUDIO_BOOK_REQUESTED",{bookId:e})},set:function(t){Object(y.a)(e,t)}}})),be=y.e.model("Subscription",{allowAccess:y.e.boolean,businessModelCode:y.e.optional(y.e.string,""),endDate:y.e.optional(y.e.integer,0),registrationUri:y.e.optional(y.e.string,""),startDate:y.e.optional(y.e.number,0),type:y.e.maybeNull(y.e.string)}),ye=y.e.model("ToolBarFeatures",{hasBookMarkPageButton:y.e.maybeNull(y.e.boolean)}),Te=y.e.model("GeneralFeatures",{hasLeftAccordion:y.e.maybeNull(y.e.boolean)}),Ie=y.e.model("BookFeatures",{hotSpotColor:y.e.maybeNull(y.e.string,!1),isUnderLineHotspot:y.e.maybeNull(y.e.boolean,!1),regionHotSpotAlpha:y.e.maybeNull(y.e.string,!1),underLineHotSpotColor:y.e.maybeNull(y.e.string,!1),underLineHotSpotThickness:y.e.maybeNull(y.e.string,!1),underLineHotSpotHoverColor:y.e.maybeNull(y.e.string)}),Se=y.e.model("BookLanguages",{languageDirection:y.e.maybeNull(y.e.string),languageID:y.e.maybeNull(y.e.integer),languageNameKey:y.e.maybeNull(y.e.string,"en_us")}),ve=y.e.model("HeaderFeatures",{hasPrintLink:y.e.maybeNull(y.e.boolean)}),Ce=y.e.model("Configuration",{enableUserPrinting:y.e.optional(y.e.boolean,!1),studyTools:y.e.optional(y.e.boolean,!1),printOfferUrl:y.e.maybeNull(y.e.string),includeMathMLLib:y.e.optional(y.e.boolean,!1),toolBarFeatures:y.e.maybeNull(y.e.compose(ye)),generalFeatures:y.e.maybeNull(y.e.compose(Te)),ipadFeatures:y.e.maybeNull(y.e.compose(Ie)),availableBookLanguages:y.e.maybeNull(y.e.array(Se)),headerFeatures:y.e.maybeNull(y.e.compose(ve))}),Oe=[{eventName:"Created a Note",category:"Notebook",action:"Create"},{eventName:"Bookmarked a Page",category:"BookMarks",action:"Add"},{eventName:"Font size change",category:"Preferences",action:"FontChange"},{eventName:"Viewed schedule readings calendar",category:"Scheduled",action:"Title Click"},{eventName:"Searched",category:"Search",action:"Query"},{eventName:"Student Favorited Terms",category:"StudyTools",action:"TermSaved"},{eventName:"Opened a Card",category:"Flashcards",action:"Open"},{eventName:"Started a Practice Session",category:"Prepare",action:"Open"},{eventName:"Created a Match",category:"MatchingGame",action:"Open"},{eventName:"Audio Playlist Opened",category:"Audio",action:"Play"}],Pe=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"handleEvent",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(window.Appcues)switch(e){case"identify":window.Appcues.identify(a.userId),E.f.getEventManager().publish("APPCUES_USER_IDENTIFIED",{}),this.initializeEventListener();break;case"page":window.Appcues.page();break;case"track":window.Appcues.track(n.eventName,n.eventProperties)}else this.injectScript().then((function(){t.handleEvent(e,a,n)}))}},{key:"initializeEventListener",value:function(){window.passEventToAppcues=function(e){var t=e.category&&e.category.split("-")[0].trim(),a=e.action&&e.action,n=Oe.find((function(e){return e.category===t&&e.action===a}));n&&window.Appcues.track(n.eventName)}}},{key:"injectScript",value:function(){return new Promise((function(e){var t=document.createElement("script");t.type="text/javascript",t.src="//fast.appcues.com/64470.js",t.async=!0,t.defer=!0,t.addEventListener("load",(function(){e()})),document.getElementsByTagName("head")[0].appendChild(t)}))}}]),e}(),Ne=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"removeQueryParameterbyName",value:function(e,t){var a=t||window.location.search,n="",o=[],r="",s=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==s){for(r=(o=s.split("&")).length-1;r>=0;r-=1)o[r].split("=")[0]===e&&o.splice(r,1);n="?".concat(o.join("&"))}return n}}]),e}();Ne.redirectToReturnUrl=function(e){var t=ne.CONSOLE_URL,a=window.sessionStorage.getItem("sourceFromInstructor");!e&&a&&(t=a),window.location=t},Ne.redirectToPage=function(e,t,a){var n=t.location.search||"",o=e.url,r=e.params.bundleId;o.indexOf("/contents")>-1?o=e.url.split("/contents")[0]:e.url.indexOf("/pages")>-1&&(o=e.url.split("/pages")[0]),Ne.getQueryParameterbyName("printPage",n)&&(n=Ne.removeQueryParameterbyName("printPage")),E.f.redirectTo("".concat(o,"/pages/").concat(a).concat(n)),r||Pe.handleEvent("page")},Ne.getQueryParameterbyName=function(e,t){var a=t||window.location.search;return new URLSearchParams(a).get(e)},Ne.redirectToLink=function(e){window.open(e,"_blank")},Ne.getPdfLanguageCode=function(e){var t;switch(e){case 1:case 2:t="en-us";break;case 4:t="it";break;case 8:case 9:t="fr-fr";break;case 10:case 11:t="fr-ca";break;default:t="en"}return t};var ke=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"getProductDescription",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.format,n=e.model,o=e.platform,r=e.subscription.businessModelCode,s="ETEXT2",i="Collections",c="CUSTOM_COLLECTIONS",l="IL Standalone eText",u=o===s,d=l;d=u?this.getProductModel(r,u):n===c?i:this.getProductModel(r,u);var p="".concat(d,", ").concat(a);return t?d:p}},{key:"getProductModel",value:function(e,t){switch(e){case"directToLearnerRenewal":return"D2L Standalone Renewal";case"directToLearner":return"D2L Standalone";default:return t?"Integrated eText":"IL Standalone eText"}}}]),e}(),_e={allowNotesCopy:!1,allowTocEdit:!1,applicationId:"ise",enableQuickView:!0,showAudio:!0,showBackNav:!0,showBookmark:!0,showDrawer:!0,showDropMenu:!1,showHeader:!0,showLastVisitedPage:!1,showPref:!0,showResource:!1,showSearch:!0,showShareNotes:!1,showStudy:!0,tenantId:ne.TENANT_ID_ETEXT,tenantKey:ne.TENANT_KEY_ETEXT},Ae={mathmlOn:!1,enableQuickView:!1,showAudio:!1,showStudy:!1,applicationId:"etext1"},je=y.e.model("Author",{firstName:y.e.maybeNull(y.e.string),lastName:y.e.maybeNull(y.e.string),otherName:y.e.maybeNull(y.e.string)}),Re=y.e.model("Product",{audioBook:y.e.optional(y.e.string,""),authors:y.e.maybeNull(y.e.union(y.e.array(je),y.e.string)),basePath:y.e.maybeNull(y.e.string),backLinkUrl:y.e.maybeNull(y.e.string),bookID:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),catalogUrl:y.e.optional(y.e.string,""),configuration:y.e.optional(Ce,{enableUserPrinting:!1,studyTools:!1,printOfferUrl:"",includeMathMLLib:!1,headerFeatures:{hasPrintLink:!1},generalFeatures:{hasLeftAccordion:!1},ipadFeatures:{hotSpotColor:"",isUnderLineHotspot:!1,regionHotSpotAlpha:"",underLineHotSpotColor:"",underLineHotSpotThickness:"",underLineHotSpotHoverColor:""},availableBookLanguages:[{languageDirection:"",languageID:1,languageNameKey:""}]}),coverThumbnailUrl:y.e.maybeNull(y.e.string),format:y.e.string,id:y.e.string,indexId:y.e.maybe(y.e.string),mathmlOn:y.e.optional(y.e.boolean,!1),mobileReady:y.e.optional(y.e.boolean,!1),model:y.e.maybeNull(y.e.string),platform:y.e.string,status:y.e.string,thumbnailUrl:y.e.maybe(y.e.string),title:y.e.maybeNull(y.e.string),version:y.e.optional(y.e.string,""),subscription:y.e.optional(be,{allowAccess:!1,businessModelCode:"",endDate:0,startDate:0,type:""}),tocUrl:y.e.maybeNull(y.e.string),serversideProcessed:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.boolean)),serversideEnabled:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.boolean)),serverSideUuid:y.e.maybeNull(y.e.string)}).views((function(e){return{getBasePath:function(){return"CITE"===e.format?"".concat(ne.CONTENT_HOST,"/").concat(ne.CITE_BASE_PATH,"/").concat(e.basePath):"CUSTOM_COLLECTIONS"===e.model?"".concat(ne.CONTENT_HOST,"/").concat(ne.COLLECTIONS_BASE_PATH):e.model===T?"".concat(ne.CONTENT_HOST).concat(e.basePath,"/"):"".concat(ne.CONTENT_HOST,"/").concat(ne.PXE_BASE_PATH,"/").concat(e.basePath)},getConfig:function(t,a){var n=E.f.getStoreRegistry().getStore("language").currentLanguage,o=e.model===T;return a?Object(X.a)(Object(X.a)({},_e),{},{mathmlOn:e.mathmlOn||e.configuration.includeMathMLLib,showDrawer:!1,showPref:!0,showBackNav:!1,showSearch:!1,showDropMenu:!1,showLastVisitedPage:!1,showAudio:!1,showBookmark:o,showResource:!1,enableQuickView:!1,showShareNotes:!1,allowTocEdit:!1,allowNotesCopy:!1,locale:n}):"PDF"===e.format?o?Object(X.a)(Object(X.a)(Object(X.a)({},_e),Ae),{},{showBackNav:!0,showBookmark:e.configuration.toolBarFeatures.hasBookMarkPageButton,showDrawer:e.configuration.generalFeatures.hasLeftAccordion,tenantKey:ne.TENANT_KEY_ETEXT_PDF,clientApp:"ETEXT1_WEB",locale:t}):"CUSTOM_COLLECTIONS"===e.model?Object(X.a)(Object(X.a)({},_e),{},{clientApp:"ETEXT2_WEB",showStudy:!1}):Object(X.a)(Object(X.a)({},_e),Ae):Object(X.a)(Object(X.a)({},_e),{},{mathmlOn:e.mathmlOn||e.configuration.includeMathMLLib,indexId:e.indexId,showBackNav:!("ETEXT2"===e.platform),showStudy:e.configuration&&e.configuration.studyTools,locale:n,showAudio:e.isAudioBook(e.audioBook)})},getCoverThumbnailUrl:function(){return e.coverThumbnailUrl&&e.coverThumbnailUrl.split(e.basePath).pop()},getBookInfo:function(){return{author:e.authors,title2:e.title,thumbnailUrl:e.thumbnailUrl||"/default-book-cover.png",printPageNumber:Ne.getQueryParameterbyName("printPage"),isDoublePage:!1,layoutDimensions:{rightStart:!1},preferenceObject:{sliderVal:"130",theme:"White",zoom:1.3}}},getBookFeatures:function(){return e.configuration.ipadFeatures},getBusinessModelCode:function(){return e.subscription.businessModelCode},getMenuData:function(){return{configuration:e.configuration,format:e.format,model:e.model,platform:e.platform,subscription:e.subscription,thumbnailUrl:e.thumbnailUrl}},getPdfLocale:function(){return Ne.getPdfLanguageCode(e.configuration.availableBookLanguages[0].languageID)},isPxe:function(){return"ETEXT2_PXE"===e.model||!1},getServerSideStatus:function(){var t=Ne.getQueryParameterbyName("isServerEnabled");return t?"true"===t&&e.serversideProcessed:e.serversideEnabled&&e.serversideProcessed},identifyUser:function(e){var t={userId:e&&e.id};t.userId&&Pe.handleEvent("identify",t)},trackAppcuesEvent:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"student",r=e.id,s=e.format,i=e.subscription.businessModelCode,c=t.showAudio,l=t.showSearch,u=t.showStudy,d={eventName:"Book opened",eventProperties:{audiobook:c,businessmodelcode:i||null,contentformat:s,courseid:a,notebook:!0,productid:r,productmodel:e.getProductModel(e.getMenuData()),role:o,schedulereading:n,search:l,studyguide:u}};Pe.handleEvent("track",null,d)},isAudioBook:function(e){return"On"===e||"On/Beta"===e},getProductModel:function(e){var t=ke.getProductDescription(e,!0);return t=t.split(" ").join("").toLowerCase()}}})).actions((function(e){return{fetch:function(t,a){e.id===t?E.f.getEventManager().publish("PRODUCT_DATA_FETCHED",{}):E.f.getEventManager().publish("PRODUCT_SYNC_REQUESTED",{id:t,bundleId:a}),E.f.getStoreRegistry().getStore("productToken").fetch(t),E.f.getStoreRegistry().getStore("audioBooks").fetch(t)},doSubscriptionCheck:function(){if(!e.subscription.allowAccess){var t=e.subscription.registrationUri||"";if(t.startsWith(ne.ZEPPELIN_URL))window.location="".concat(ne.CONSOLE_URL);else{var a=t?"SUBSCRIPTION_REGISTRATION":"SUBSCRIPTION_GENERIC";E.f.redirectToErrorPage(a,"common.PURCHASE",t)}}},updateDataLayer:function(){window.dataLayer.push({businessModelCode:e.subscription.businessModelCode||"",userId:E.f.getStoreRegistry().getStore("user").id})},sendPageUnloadEvent:function(t,a){var n={type:"UserUnloadsContent",pageId:t,userId:E.f.getStoreRegistry().getStore("user").id,isBundled:"ETEXT2"===e.platform,isFromCourse:a,businessModelCode:e.subscription.businessModelCode};a?n.course=E.f.getStoreRegistry().getStore("course"):n.product=Object(y.b)(e),E.f.getEventManager().publish("AUTOBAHN_TIMEONTASK",n)},sendPageLoadEvent:function(t,a){if(e.model!==T){var n={type:"UserLoadsContent",pageId:t,userId:E.f.getStoreRegistry().getStore("user").id,isBundled:"ETEXT2"===e.platform,isFromCourse:a,businessModelCode:e.subscription.businessModelCode};a?n.course=E.f.getStoreRegistry().getStore("course"):n.product=Object(y.b)(e),E.f.getEventManager().publish("AUTOBAHN_TIMEONTASK",n)}},set:function(t){Object(y.a)(e,t),e.doSubscriptionCheck(),e.updateDataLayer(),E.f.getEventManager().publish("PRODUCT_DATA_FETCHED",{})},setPLAEvents:function(t,a,n){if(e.model&&e.model!==T)n&&n!==t&&e.sendPageUnloadEvent(n,a),t&&t!==n&&e.sendPageLoadEvent(t,a);else{var o=a?"COURSE_DATA_FETCHED":"PRODUCT_DATA_FETCHED";E.f.getEventManager().on(o,(function(){t&&e.sendPageLoadEvent(t,a)}))}}}})),Ue=y.e.model("Instructor",{id:y.e.string,firstName:y.e.string,lastName:y.e.string}),Le=y.e.model("Course",{annotationExists:y.e.maybeNull(y.e.boolean),id:y.e.string,courseId:y.e.maybeNull(y.e.string),title:y.e.maybeNull(y.e.string),code:y.e.maybeNull(y.e.string),organizationId:y.e.maybeNull(y.e.string),source:y.e.maybeNull(y.e.string),key:y.e.maybeNull(y.e.string),role:y.e.optional(y.e.string,"student"),platform:y.e.maybeNull(y.e.string),status:y.e.maybeNull(y.e.string),startDate:y.e.maybeNull(y.e.integer),endDate:y.e.maybeNull(y.e.integer),isStudent:y.e.optional(y.e.boolean,!0),instructors:y.e.maybeNull(y.e.array(Ue)),products:y.e.array(Re),lastUpdateTime:y.e.maybeNull(y.e.string)}).views((function(e){return{getProduct:function(){return e.products&&e.products.length?e.products[0]:{}},getBasePath:function(){return e.getProduct().getBasePath()},getConfig:function(t,a,n){return Object(X.a)(Object(X.a)({},e.getProduct().getConfig(t,a)),{},{showShareNotes:!e.isStudent,allowTocEdit:"PDF"!==e.getProduct().format&&!e.isStudent,allowNotesCopy:!e.isStudent&&"ETEXT2"===e.getProduct().platform,showBackNav:e.getProduct().model===T?n:!a})},showScheduleIcon:function(){return"ETEXT2"!==e.getProduct().platform},getBookInfo:function(){return{author:e.getProduct().authors,title2:e.getProduct().title,thumbnailUrl:e.getProduct().thumbnailUrl||"/default-book-cover.png",title:e.title,printPageNumber:Ne.getQueryParameterbyName("printPage"),isDoublePage:!1,layoutDimensions:{rightStart:!1},preferenceObject:{sliderVal:"130",theme:"White",zoom:1.3}}},getMenuData:function(){var t="ETEXT2"===e.getProduct().platform?e.title:e.code;return Object(X.a)(Object(X.a)({},e.getProduct().getMenuData()),{},{courseName:t})}}})).actions((function(e){return{fetch:function(t,a,n){e.id===t?E.f.getEventManager().publish("COURSE_DATA_FETCHED",{}):E.f.getEventManager().publish("COURSE_SYNC_REQUESTED",{courseId:t,productId:a,bundleId:n})},fetchManifest:function(){E.f.getEventManager().publish("MANIFEST_REQUESTED",{courseId:e.id,productId:e.getProduct().id,contentType:e.getProduct().format,isBundled:"ETEXT2"===e.getProduct().platform,tocProvider:e.getProduct().tocUrl})},customTocPublish:function(t,a){E.f.getEventManager().publish("CUSTOM_TOC_PUBLISH_REQUESTED",{courseId:e.id,changedTocData:t,model:e.getProduct().model,productId:a||e.getProduct().id,isBundled:"ETEXT2"===e.getProduct().platform,smsToken:Ne.getQueryParameterbyName("key")||""})},resetCustomToc:function(t){E.f.getEventManager().publish("RESET_TOC_REQUESTED;",{courseId:e.id,productId:t||e.getProduct().id,model:e.getProduct().model,tocProvider:e.getProduct().tocUrl||ue.getManifest().provider,contentType:e.getProduct().format})},set:function(t,a){Object(y.a)(e,t);var n=e.getProduct();n.updateDataLayer(),n.doSubscriptionCheck(),E.f.getEventManager().publish("COURSE_DATA_FETCHED",{}),n.id&&(E.f.getStoreRegistry().getStore("asset").fetch(n.id,t.id,a),E.f.getStoreRegistry().getStore("productToken").fetch(n.id),E.f.getStoreRegistry().getStore("audioBooks").fetch(n.id))}}})),De=function e(){Object(l.a)(this,e)};De.playlistMapper=function(e,t,a){var n=t||[];return e.forEach((function(e){var t,o=e;"chapter"===e.type&&e.children&&(t=e.id),"slate"===e.type?(o.parentid=a,n.push(o)):e.children&&e.children.length&&De.playlistMapper(e.children,n,t)})),n};var we=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"getHotspotType",value:function(e){var t=e.toLowerCase(),a={};return(t.endsWith(".doc")||t.endsWith(".docx"))&&(a.region="DOCUMENT"),(t.endsWith(".xls")||t.endsWith(".xlsx"))&&(a.region="DOCUMENT"),(t.endsWith(".ppt")||t.endsWith(".pptx"))&&(a.region="DOCUMENT"),t.endsWith(".pdf")?a.region="DOCUMENT":t.endsWith(".mp4")||t.endsWith(".m4v")?a.region="VIDEO":t.endsWith(".mp3")?a.region="AUDIO":t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".png")||t.endsWith(".gif")?a.region="IMAGE":a.region="URL",a}},{key:"getRegionDetails",value:function(e){var t=e;switch(t.hotspotType="",t.linkTypeId){case 1:t.hotspotType="IMAGE";break;case 2:case 13:t.hotspotType="VIDEO";break;case 4:case 12:t.hotspotType="AUDIO";break;case 5:t.hotspotType="PAGENUMBER";break;case 8:t.hotspotType="EMAIL";break;case 11:t.hotspotType="LTILINK";break;case 7:case 9:t.hotspotType=this.getTypeFromRegion(t.regionTypeId,t.linkUri);break;case 15:t.hotspotType=this.getTypeFromRegion(t.linkTypeId,t.linkUri);break;default:t.hotspotType="URL"}if("PAGENUMBER"!==t.hotspotType||"EMAIL"!==t.hotspotType||"LTILINK"!==t.hotspotType){var a=t.linkUri;(a.startsWith("https://mediaplayer.pearsoncmg.com/assets")||a.startsWith("http://mediaplayer.pearsoncmg.com/assets"))&&(t.hotspotType="SPPASSET"),"URL"===t.hotspotType&&/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(\S+)?$/.test(t.linkUri)&&(t.hotspotType="VIDEO"),"SPPASSET"!==t.hotspotType&&(a.endsWith(".htm")||a.endsWith(".html")||a.startsWith("http://mediaplayer.pearsoncmg.com")||a.startsWith("https://mediaplayer.pearsoncmg.com"))&&(t.hotspotType="URL")}return t}},{key:"createHttps",value:function(e){var t=e;if(/^http:\/\//i.test(e)){var a=e.substring(4);t="https".concat(a)}return t}}]),e}();we.disableNavigation=function(){var e=document.getElementsByClassName("pageNavigationContainer")[0];e&&e.classList.add("navigation-disabled")},we.enableNavigation=function(){var e=document.getElementsByClassName("pageNavigationContainer")[0];e&&e.classList.remove("navigation-disabled")},we.isValidHotspot=function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=S,s=r.FLV,i=r.IPADAPP,c=r.JAZZASSET,l=r.LTILINK,u=r.SWF,d=I,p=d.FLV_FORMAT,g=d.SWF_FORMAT,m=v,h=m.DEFAULT_ROLE,f=m.DEFAULT_ROLE_ID,E=m.INSTRUCTOR_ID,b=m.STUDENT,y=m.STUDENT_ID,T=!0;if(!o&&e.linkTypeId&&l===e.linkTypeId)return!!t&&(e.platformId&&e.platformId.toString()===t);var C=a===b?y:E;T=o?!(!e.role||e.role!==h)||e.role===a:!(!e.roleTypeId||e.roleTypeId!==f)||C===e.roleTypeId;var O=n||[s,u,i,c],P=[p,g],N=!O.includes(e.linkTypeId)&&T&&!P.some((function(t){return e.linkUri.toString().endsWith(t)}));return N},we.removeElementsByClass=function(e){for(var t=document.getElementsByClassName(e);t.length>0;)t[0].parentNode.removeChild(t[0])},we.getTypeFromRegion=function(e,t){var a;switch(e){case 1:a="AUDIO";break;case 6:a="IMAGE";break;case 8:case 11:a=we.getHotspotType(t).region;break;case 9:case 13:case 14:case 15:a="DOCUMENT";break;case 12:a="VIDEO";break;default:a="URL"}return a},we.getPlayOrder=function(e,t,a,n,o){var r="Cover"===a,s=t?e&&e.children:e&&e.slates,i=a,c=e&&e.slates&&e.getPagePlaylist(t,o,n);if(t){var l=JSON.parse(atob(t));i=l.startPage}var u=!r&&s&&s.find((function(e){return e.pageno===i}));n&&(u=!r&&c&&c.find((function(e){return e.pagenumber===i})));var d={};return s&&(d={pageId:r?"Cover":u&&u.playOrder,deeplink:!0}),d},we.isValidRole=function(e,t){return!(!e.role||e.role!==v.DEFAULT_ROLE)||e.role===t};var Me=function e(){Object(l.a)(this,e)};Me.constructTree=function(e,t,a){if("glossary"===e.type)return!1;var n=S,o=[n.FLV,n.SWF,n.IPADAPP,n.JAZZASSET,n.GLOSSARY_TERM],r=["assessment","asset","custom","standards"],s={},i=e.id.toString();return s.title=e.title,s.children=[],s.linkUri=e.uri||"",s.uri=e.uri,s.pageOrder=e.playOrder,s.pageNumber=e.pageno,s.type="Chapter",t.forEach((function(t){t.pageno===e.pageno&&(i=t.playOrder)})),r.includes(e.type)&&(i=(e.id||"").toString(),s.type=e.type),s.id=i,s.linkTypeId=e.linkTypeID||"",s.regionTypeId=e.regionTypeID||"",s.role=e.role,e.children&&e.children.forEach((function(e){var n=Me.constructTree(e,t,a);n&&(r.includes(n.type)?we.isValidHotspot(n,null,a,o,!0)&&s.children.push(n):s.children.push(n))})),s},Me.tocTraverse=function(e,t,a,n){var o={},r=t?e.children:e.slates;return n?Me.spdfToc(e,r,a):(o.id=e.id,o.title=e.title,o.type=e.type,o.children=[],o.ProductId=e.productId,e.children.forEach((function(e){var t=Me.constructTree(e,r,a),n=!0;t&&(t.role&&(n=we.isValidRole(t,a)),n&&o.children.push(t))})),o)},Me.spdfToc=function(e,t,a){var n={};return n.title=e.title,n.type="Book",n.children=[],n.ProductId=e.productId,e.children.forEach((function(e){var o=Me.constructSpdfTree(e,t,a),r=!0;o&&(o.role&&(r=we.isValidRole(o,a)),r&&n.children.push(o))})),n},Me.constructSpdfTree=function(e,t,a){if("glossary"===e.type)return!1;var n,o,r=S,s=[r.FLV,r.SWF,r.IPADAPP,r.JAZZASSET,r.GLOSSARY_TERM],i=["assessment","asset","custom","standards"],c={};t.forEach((function(t){t.pageno===e.pageno&&(n=t.parentid,o=t.playOrder)}));var l="".concat(o);return c.label=e.title,c.href=l,c.uri=l,c.children=[],c.linkUri=e.uri||"",c.pageOrder=e.playOrder,c.pageNumber=e.pageno,c.type="Chapter",c.parentId=n,i.includes(e.type)&&(l=e.id&&e.id.toString()||"",c.type=e.type),c.id=l,c.linkTypeId=e.linkTypeID||"",c.regionTypeId=e.regionTypeID||"",c.role=e.role,e.children&&e.children.forEach((function(e){var n=Me.constructSpdfTree(e,t,a);n&&(i.includes(n.type)?we.isValidHotspot(n,null,a,s,!0)&&c.children.push(n):c.children.push(n))})),c};var Be,xe=y.e.model("Children",{title:y.e.maybeNull(y.e.string),type:y.e.maybeNull(y.e.string),id:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),uri:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),playOrder:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),sectionType:y.e.maybeNull(y.e.string),children:y.e.array(y.e.late((function(){return xe}))),pageno:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),linkTypeID:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),regionTypeID:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),role:y.e.maybeNull(y.e.string)}),Fe=y.e.model("Slates",{pageno:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),optional:y.e.maybeNull(y.e.union(y.e.string,y.e.boolean)),id:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),type:y.e.maybeNull(y.e.string),title:y.e.maybeNull(y.e.string),uri:y.e.maybeNull(y.e.string),playOrder:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),parentid:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number))}),He=y.e.model("Asset",{id:y.e.maybeNull(y.e.string),title:y.e.maybeNull(y.e.string),type:y.e.maybeNull(y.e.string),playOrder:y.e.optional(y.e.string,"0"),productId:y.e.optional(y.e.string,""),children:y.e.array(xe),slates:y.e.maybeNull(y.e.array(Fe))}).views((function(e){return{getPagePlaylist:function(t,a,n){var o=a.bookID,r=a.format,s=a.model,i=a.indexId,c=(a.id,a.serverSideUuid),l=[],u=a.getCoverThumbnailUrl(),d=t?e.children:e.slates;if(n){var p=a.getBasePath().split("ebook".concat(i))[0].replace("ebookassets","pdfassets");if(s===T&&u&&!t){var g={href:"".concat(p).concat(o,"/").concat(c,"/pages/page0"),id:"0",index:"0",pagenumber:"Cover",playOrder:"0",title:"Cover",type:"page",uri:"".concat(p).concat(o,"/").concat(c,"/pages/page0")};l.push(g)}return d.forEach((function(e){var t={type:"page",id:"".concat(e.playOrder),href:"".concat(p).concat(o,"/").concat(c,"/pages/page").concat(e.playOrder),uri:"".concat(p).concat(o,"/").concat(c,"/pages/page").concat(e.playOrder),index:e.playOrder,title:"".concat("Page"," ").concat(e.pageno),pagenumber:e.pageno,_id:e.id,playOrder:"".concat(e.playOrder),chapterId:e.parentid?e.parentid.toString():"",chapterTitle:e.title};l.push(t)})),l}if("PDF"===r){if("CUSTOM_COLLECTIONS"===s&&(d=De.playlistMapper(e.children)),s===T&&u&&!t){var m={href:u,id:"Cover",pagenumber:"Cover",playOrder:"Cover",title:"Cover",type:"page",uri:u};l.push(m)}return d.forEach((function(e){var t=e.pageno?e.pageno.toString():e.title.split(" ")[1],a=e.playOrder?e.playOrder.toString():"",n="CUSTOM_COLLECTIONS"===s?e.title:"".concat("Page"," ").concat(e.pageno),o={chapterId:e.parentid?e.parentid.toString():"",chapterTitle:e.title,href:e.uri,id:e.pageno?a:e.id,pagenumber:t,parentid:e.parentid,playOrder:a,printDisabled:e.optional,title:n,type:"page",uri:e.uri};l.push(o)})),l}return!1},getAssetTocPdf:function(t,a,n){return Me.tocTraverse(e,t,a,n)}}})).actions((function(e){return{fetch:function(t,a,n){e.id===t||e.id===a?E.f.getEventManager().publish("ASSET_FETCHED",{}):(e.loading=!0,E.f.getEventManager().publish("ASSET_REQUESTED",{courseId:a,productId:t,bundleId:n}))},set:function(t){Object(y.a)(e,t)}}})),Ge=a(1117),Ve=y.e.model("CourseInfoItem",{annotationExists:y.e.boolean,contextId:y.e.string,courseName:y.e.maybeNull(y.e.string)}),ze=y.e.model("CourseListData",{items:y.e.array(Ve)}).views((function(e){return{getData:function(t){var a=E.f.getStoreRegistry().getStore("course"),n={contextId:t,courseName:a.getProduct().title};if(t){var o=0,r=Object(Ge.a)(e.items);E.e.treeWalk(r,null,"",-1,(function(e){return o+=1,e.contextId!==t||(n.currentCourseInfo=e,r.splice(o-1,1),n.annotationCount=e.annotationExists,n.courseInfo=r,!1)}))}return n}}})).actions((function(e){return{fetch:function(e){var t=E.f.getStoreRegistry().getStore("course");E.f.getEventManager().publish("COURSE_COLLECTION_REQUESTED",{courseId:t.id,productId:e||t.getProduct().id,courseName:t.getProduct().title})},set:function(t){Object(y.a)(e,t)}}})),We=y.e.model("CourseContainerState",{showConfigToc:y.e.optional(y.e.boolean,!1),showSuccessMsg:y.e.optional(y.e.boolean,!1)}).actions((function(e){return{set:function(t){Object(y.a)(e,t)}}})),Ye=y.e.model("LearningResource",{id:y.e.string,title:y.e.string,uri:y.e.maybe(y.e.string),children:y.e.array(y.e.late((function(){return Ye})))}),Qe=Ye,Xe=y.e.model("AssignmentItem",{id:y.e.string,title:y.e.string,dueDate:y.e.integer,status:y.e.optional(y.e.string,""),state:y.e.maybeNull(y.e.string),showScores:y.e.maybeNull(y.e.boolean),points:y.e.maybeNull(y.e.number),percentage:y.e.maybeNull(y.e.number),pointsEarned:y.e.maybeNull(y.e.number),lastUpdatedTime:y.e.integer,availabilityDate:y.e.maybeNull(y.e.integer),children:y.e.optional(y.e.array(Qe),[])}),qe=y.e.model("Assignments",{items:y.e.array(Xe)}).actions((function(e){return{fetch:function(t){e.id===t?E.f.getEventManager().publish("ASSIGNMENT_FETCHED",{}):E.f.getEventManager().publish("ASSIGNMENT_REQUESTED",{courseId:t})},set:function(t){Object(y.a)(e,{items:t}),E.f.getEventManager().publish("ASSIGNMENT_FETCHED",{})},setAssignmentsAsEmpty:function(){Object(y.a)(e,{items:[]}),E.f.getEventManager().publish("ASSIGNMENT_FETCHED",{})}}})),Ke=a(177),Ze=a(26),Je=a(232),$e=a(535),et=a(1109),tt=a(419),at=y.e.model("ProductToken",{id:y.e.string,name:y.e.string,value:y.e.string,expirationTime:y.e.optional(y.e.integer,0),verified:y.e.boolean}).views((function(e){return{isRefreshNeeded:function(){return!e.value.includes("eplayer/pdfassets")||e.expirationTime-Date.now()<18e6}}})).actions((function(e){return{fetch:function(t){e.id!==t||e.isRefreshNeeded()?E.f.getEventManager().publish("PRODUCT_TOKEN_REQUESTED",{id:t}):e.setVerified(!0)},setVerified:function(t){e.verified=t},set:function(t){Object(y.a)(e,t)}}})),nt=a(1110),ot=a(960),rt=a(962),st=a(963),it=Object(_.b)("assignmentStatus","assignments","language")(Be=Object(_.c)(Be=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClose=function(){window.location.hash=""},n.state={openPopup:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.match;t.assignments.fetch(a.params.id),E.f.getEventManager().on("ASSIGNMENT_FETCHED",(function(){e.setState({openPopup:!0})}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.match,n=t.assignments;e.match.params.id!==a.params.id&&n.fetch(a.params.id)}},{key:"render",value:function(){var e=this.props,t=e.assignmentStatus,a=e.assignments,n=e.language,o=!(!t.isPending&&t.isError&&a.items&&0===a.items.length)&&t.isError,r=this.state.openPopup;return s.a.createElement("div",null,r&&s.a.createElement(ot.a,{open:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(rt.a,null,s.a.createElement(st.a,{id:"alert-dialog-description"},s.a.createElement(E.d,{loading:t.isPending,error:o,content:s.a.createElement(nt.SchedulerComponent,{data:a.items,locale:n.currentLanguage,open:!0,onClose:this.handleClose,onPageClick:this.props.onNavigationChange,onDateChange:function(e){return e},invisibleBackdrop:!0}),loadingContent:s.a.createElement(j.a,null),errorContent:s.a.createElement(E.c,{errorCode:"GENERIC"})})))))}}]),a}(s.a.Component))||Be)||Be,ct=Object(Ze.injectIntl)(it),lt=function(){function e(t){Object(l.a)(this,e),this.context=t}return Object(u.a)(e,[{key:"get",value:function(e){var t=E.f.getLogger(e),a=this.context.props,n=a.user,o=a.course,r=a.productToken;return{getToken:function(){return{id:n.id,type:"PI",token:n.token,userRole:o?o.role:"student"}},getUserId:function(){return n.id},onError:function(){},getCdnToken:function(){var e={name:r.name,value:r.value,expirationTime:r.expirationTime};return t.debug("getCdnToken call",e),e}}}}]),e}(),ut=Object(L.a)((function(){return{contentRoot:{paddingLeft:50},removeRoot:{position:"absolute",top:3,right:5},checkIconRoot:{position:"absolute",top:35,left:25}}}))((function(e){var t=e.showSuccessMsg,a=e.onClose,n=e.language,o=e.classes;return s.a.createElement(ot.a,{open:t,onClose:a,id:"success-dialog"},s.a.createElement(rt.a,{classes:{root:o.contentRoot}},s.a.createElement(Je.a,{onClick:a,classes:{root:o.removeRoot}},s.a.createElement(f.Icon,{name:"Remove",color:"action",fontSize:"small"})),s.a.createElement(f.Icon,{name:"CheckCircleFilled",color:"primary",classes:{root:o.checkIconRoot}}),s.a.createElement(R.a,{variant:"h4"},s.a.createElement(Ze.FormattedMessage,n.getText("courses.toc.PUBLISH_SUCCESS"))),s.a.createElement(R.a,{variant:"body2"},s.a.createElement(Ze.FormattedMessage,n.getText("courses.toc.PUBLISH_MESSAGE")))))})),dt=function e(t){var a=this;Object(l.a)(this,e),this.getMenuItems=function(e,t){var n=(a.context.props.course||a.context.props.product).getMenuData(),o=[],r=E.f.getStoreRegistry().getStore("language"),i=E.f.getStoreRegistry().getStore("user"),c=i.fullName,l=i.email,u=i.initials,d=n.configuration&&n.configuration.printOfferUrl||!1,p=(new Date).getFullYear(),g={type:"divider"},m={type:"nonlink",text:s.a.createElement(f.ProfileDisplay,{id:"my-profile-display",avatarText:"".concat(u),name:"".concat(c),email:"".concat(l)})};o.push(m,g);var h={type:"link",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.PRINT_PAGE")),value:"PRINT_PAGE"},b=n.configuration&&n.configuration.headerFeatures&&n.configuration.headerFeatures.hasPrintLink,y=n.configuration&&n.configuration.enableUserPrinting;(b&&!e||y||"CUSTOM_COLLECTIONS"===n.model)&&o.push(h);var T={type:"link",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.CONTACT_SUPPORT")),value:"CONTACT SUPPORT"},I={type:"nonlink",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.FOXIT")),value:"FOXIT"},S={type:"nonlink",text:"".concat(n.courseName,", ").concat(t)},v={type:"expand",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.ABOUT")),list:[{type:"link",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.ACCESSIBILITY")),value:"ACCESSIBILITY"},{type:"link",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.TERMS_OF_USE")),value:"TERMS OF USE"},{type:"link",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.PRIVACY_POLICY")),value:"PRIVACY POLICY"}]};"PDF"===n.format&&v.list.push(I),t&&v.list.push(S);var C={type:"nonlink",text:ke.getProductDescription(n),value:""},O={type:"copyright",text:s.a.createElement(Ze.FormattedMessage,Object.assign({},r.getText("menu.COPY_RIGHT"),{values:{year:p}}))};if(v.list.push(C,O),o.push(T,g,v,g),d){var P={type:"purchase",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.GET_LOOSE_LEAF")),value:"GET LOOSE LEAF",primarydescription:s.a.createElement(Ze.FormattedMessage,r.getText("menu.AVAILABLE")),secondarydescription:s.a.createElement(Ze.FormattedMessage,r.getText("menu.PRINT_VERSION")),imageUrl:n.thumbnailUrl};o.push(P,g)}var N={type:"signout",text:s.a.createElement(Ze.FormattedMessage,r.getText("menu.SIGN_OUT")),value:"SIGN OUT"};return o.push(N),o},this.handleChange=function(e,t){var n=E.f.getStoreRegistry().getStore("language");switch(t.value){case"PRINT_PAGE":a.handlePrint();break;case"CONTACT SUPPORT":Ne.redirectToLink(n.getMessage("link.SUPPORT"));break;case"ACCESSIBILITY":Ne.redirectToLink(n.getMessage("link.ACCESSIBILITY"));break;case"TERMS OF USE":var o="".concat(ne.CONSOLE_URL,"/account/manage/tos");Ne.redirectToLink(o);break;case"PRIVACY POLICY":var r="".concat(ne.CONSOLE_URL,"/account/manage/privacy");Ne.redirectToLink(r);break;case"GET LOOSE LEAF":var s=a.context.props.course.getProduct().configuration,i=s&&s.printOfferUrl;i&&Ne.redirectToLink(i);break;case"SIGN OUT":a.handleSignOut()}},this.handleSignOut=function(){E.f.logout()},this.handlePrint=function(){var e=a.context.props,t=e.course,n=e.product,o=e.asset,r=e.match,s=(t||n).getMenuData(),i=(t||n).getBasePath(),c=(t||n).getConfig().locale,l=r.params.pageId,u="";E.e.treeWalk(o,null,"children",-1,(function(e){return e.id!==l||(u=e.uri,!1)}));var d="".concat(i,"/").concat(u),p="/print?locale=".concat(c,"&url=").concat(d),g={type:"getPrintImg",data:{pageIndex:0,scale:2},success:a.printPage};"PDF"===s.format?window.WebPDF.Tool.getReaderApp().getDataControl().getPrintImg(g):window.open(p,"printPage","".concat("scrollbars=yes, toolbar=no, location=no, status=no,"," ").concat("titlebar=no, toolbar=no, menubar=no, resizable=no, dependent=no"))},this.printPage=function(e){var t=(a.context.props.course||a.context.props.product).getMenuData(),n=t.configuration&&t.configuration.generalFeatures&&t.configuration.generalFeatures.printWithFooter,o=t.configuration&&t.configuration.generalFeatures&&t.configuration.generalFeatures.printWithWatermark,r=new Blob([e.imageData],{type:"image/png"}),s=URL.createObjectURL(r),i=new Date,c="".concat(i.getMonth()+1,"/").concat(i.getDate(),"/").concat(i.getFullYear()),l=E.f.getStoreRegistry().getStore("user"),u={fullName:l.fullName,currentDate:c,email:l.email},d=E.f.getStoreRegistry().getStore("language"),p=d.getMessage("print.FOOTER_MESSAGE");Object.keys(u).forEach((function(e){p=p.split("{".concat(e,"}")).join(u[e])}));var g=d.getMessage("print.WATERMARK"),m=document.createElement("iframe");m.id="printFrame",m.tabIndex="-1",m.style.width="0px",m.style.height="0px",document.body.appendChild(m);var h="#watermark { \n      top: 40%;\n      left: 10%;\n      position: absolute;\n      transform: rotate(30deg) translateY(-50%);\n      -webkit-transform: rotate(30deg) translateY(-50%);\n      -ms-transform: rotate(30deg) translateY(-50%);\n      font-size: 40px;\n      font-weight: 20px;\n      opacity: 0.3;\n      display: none;\n    }#footer {\n      bottom: 0;\n      position: absolute;\n      display: none;\n      font-size: 14px\n    }";p&&g?h+="@media print {\n        @page { size: A4; page-break-after: avoid; margin: 0;}\n        img { max-height: 29cm; max-width: 21cm; margin: 0;}\n        #footer { display: block; } #watermark{ display: block; }}":n&&!o?h+="@media print {\n        @page { size: A4; page-break-after: avoid; margin: 0;}\n        img { max-height: 29cm; max-width: 21cm; margin:0;}\n        #footer { display: block; }}":n||(h+=o?"@media print {\n          @page { size: A4; page-break-after: avoid; margin: 0;}\n          img { max-height: 29cm; max-width: 21cm; margin: 0;}\n          #watermark{ display: block; }}":"@media print {\n          @page { size: A4; page-break-after: avoid; margin: 0;}\n          img{ max-height: 29cm; max-width: 21cm; margin: 0;}}"),m.contentWindow.document.open(),m.contentWindow.document.write('<style type="text/css">'.concat(h,"</style>")),m.contentWindow.document.write('<div><img src="'.concat(s,'" onload="window.print();">\n      <div id=watermark>').concat(g,"</div><div id=footer>").concat(p,"</div></div>")),m.contentWindow.document.close(),window.onafterprint=function(){document.body.removeChild(document.getElementById("printFrame"))}},this.context=t},pt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"BACK_LINK_REQUESTED","backLinkStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){return this.getClient("etext").post("/nextext/backlink/launchparams/id/".concat(e),t)}}]),a}(E.a),gt=function(){function e(t){Object(l.a)(this,e),this.context=t,this.client=new pt(this)}return Object(u.a)(e,[{key:"post",value:function(e){var t=this,a=this.context.props.match.params,n=a.id,o={custom_bookid:a.productId,custom_course_id:n};return new Promise((function(a,n){t.client.handleEvent("".concat(e.guid),o).then((function(e){var t=Object(X.a)(Object(X.a)({},e),{},{endPoint:e.data.end_point_uri});a(t)}),(function(e){n(e)}))}))}}]),e}(),mt=y.e.model("Children",{regionId:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),regionTypeId:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),linkUri:y.e.maybeNull(y.e.string),imageUri:y.e.maybeNull(y.e.string),name:y.e.maybeNull(y.e.string),playOrder:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),linkType:y.e.maybeNull(y.e.string,""),pageno:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),x:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),y:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),width:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),height:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),linkTypeId:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),transparent:y.e.maybeNull(y.e.boolean),glossary:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),isIcon:y.e.maybeNull(y.e.union(y.e.string,y.e.integer,y.e.number)),platformId:y.e.maybeNull(y.e.integer),iconTypeId:y.e.maybeNull(y.e.number),roleTypeId:y.e.maybeNull(y.e.number)}),ht=y.e.model("PdfHotspot",{children:y.e.array(mt)}).views((function(e){return{getHotspotData:function(t,a){var n=null,o=parseInt(t.split("_")[1],10),r=e.children.find((function(e){return e.regionId===o})),s=null!=r.glossary?"glossary":"hotspot";return"glossary"===s&&(n=a.searchResults.find((function(e){return e.source.itemId===r.glossary}))),{hotspotType:s,regionData:r,glossaryData:{glossaryTerm:n&&n.source.term,glossaryDefinition:n&&n.source.definition}}},filterHotspots:function(e,t,a){return e.filter((function(e){return we.isValidHotspot(e,t,a)}))}}})).actions((function(e){return{fetch:function(t,a){e.id===t?E.f.getEventManager().publish("PDF_HOTSPOT_FETCHED",{}):E.f.getEventManager().publish("PDF_HOTSPOT_REQUESTED",{productId:t,pageId:a})},setPdfHotspot:function(t){Object(y.a)(e,t),E.f.getEventManager().publish("PDF_HOTSPOT_FETCHED",{})}}})),ft=a(268),Et=(a(1922),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fetchRegionData=function(e){n.onHotspotCloseButton();var t=we.getRegionDetails(e);"IMAGE"===t.hotspotType||"VIDEO"===t.hotspotType||"AUDIO"===t.hotspotType?n.setState({regionData:t},(function(){if("IMAGE"===n.state.regionData.hotspotType){var e=document.getElementsByClassName("preview-image")[0];e.style.display="none";try{e.click()}catch(a){}document.getElementById("hotspot").className="hotspotContent"}else if("VIDEO"===n.state.regionData.hotspotType){var t=document.getElementsByClassName("poster-play-icon")[0];t.style.display="none",document.getElementsByClassName("thumb-nail")[0].style.display="none";try{document.getElementsByClassName("regionContainer")[0].style.display="block",t.click()}catch(a){}document.getElementById("hotspot").className="videoContent"}else if("AUDIO"===n.state.regionData.hotspotType&&n.state.regionData.linkTypeId===S.FACELESSAUDIO){try{document.getElementById("hotspot").className="hotspotContent",document.getElementsByClassName("aquila-audio-player")[0].style.display="none"}catch(a){}document.getElementById("hotspot").className="hotspotContent"}if("AUDIO"===n.state.regionData.hotspotType&&n.state.regionData.linkTypeId!==S.FACELESSAUDIO){try{document.getElementsByClassName("aquila-audio-player")[0].style.display="flex",document.getElementsByClassName("regionContainer")[0].style.display="block",document.getElementById("regionCloseBtn").style.display="block",window.jQuery(".regionContainer").draggable()}catch(a){}document.getElementById("hotspot").className="hotspotContent"}})):n.renderHotspot(t)},n.renderHotspot=function(e){var t,a,o=" ";switch(e.hotspotType){case"AUDIO":t={audioSrc:a=we.createHttps(e.linkUri),audioTitle:e.title},o=s.a.createElement(ft.AudioPlayer,{url:t.audioSrc,title:t.audioTitle,onClose:n.onHotspotCloseButton,autoPlay:!0});break;case"PAGENUMBER":var r=n.props.pagePlaylist.find((function(t){return t.pagenumber===e.linkUri}));n.props.goToPageNumber(r&&r.playOrder);break;case"EMAIL":window.location="mailto:".concat(e.linkUri);break;case"IMAGE":a=we.createHttps(e.linkUri),t={alt:e.name,src:a,title:e.name,items:e},o=s.a.createElement(ft.ImageViewerPreview,{data:t,onClose:n.onHotspotCloseButton});break;case"VIDEO":a=we.createHttps(e.linkUri),t={title:e.name,src:a,caption:e.description||"",id:e.regionId,anonymous:!1,thumbnail:{src:""},alt:e.name},o=s.a.createElement(ft.VideoPlayerPreview,{data:t,embeddedMode:!1,onClose:n.onHotspotCloseButton});break;case"SPPASSET":a=e.linkUri;var i=document.getElementById("sppModalHeader").style.height,c=document.getElementById("sppModalBody"),l=a.lastIndexOf("/"),u=a.slice(l+1),d="https://mediaplayer.pearsoncmg.com/assets/_embed.sppModalBody/".concat(u),p=document.createElement("SCRIPT"),g=document.getElementById("sppModal"),m=document.getElementById("root");document.getElementById("sppTitle").innerText=e.name,p.src=d,c.appendChild(p),c.style.height="".concat(document.documentElement.clientHeight-parseInt(i,10),"px"),c.style.width="".concat(document.documentElement.clientWidth,"px"),document.getElementById("sppCloseBtn").addEventListener("click",n.onHotspotCloseButton);try{m.insertBefore(g,m.childNodes[0]),g.style.display="block"}catch(I){}break;case"DOCUMENT":case"URL":window.open(e.linkUri,"_blank");break;case"LTILINK":var h=n.props,f=h.productId,E=h.isStudent,b=h.userId,y=E?"2":"3",T="".concat(n.props.basePath,"?json=").concat(e.linkUri,"&contextid=").concat(f,"&role=").concat(y,"&smsuserid=").concat(b);window.open(T,"_blank");break;default:o=null}return o},n.onHotspotCloseButton=function(){try{var e=document.getElementById("player-iframesppModalBody");e&&e.remove(),document.getElementById("sppModal").style.display="none",n.state.regionData&&n.setState({regionData:null}),we.removeElementsByClass("ReactModalPortalAnimated"),document.getElementsByClassName("regionContainer").style.display="none"}catch(t){}},n.state={regionData:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.regionData;e&&this.fetchRegionData(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.regionData;this.fetchRegionData(t)}},{key:"render",value:function(){return s.a.createElement(r.Fragment,null,this.state.regionData&&s.a.createElement("div",{className:"regionContainer"},s.a.createElement("button",{type:"button",id:"regionCloseBtn",className:"regionCloseBtn",onClick:this.onHotspotCloseButton},"\xd7"),s.a.createElement("div",{id:"hotspot"},this.renderHotspot(this.state.regionData))),s.a.createElement("div",{id:"sppModal",className:"sppModal",tabIndex:"-1"},s.a.createElement("div",{id:"sppModalHeader",className:"sppModalHeader",style:{height:"".concat(60,"px")}},s.a.createElement("span",{id:"sppCloseBtn",className:"sppCloseBtn"},"\xd7"),s.a.createElement("p",{id:"sppTitle",className:"sppTitle"})),s.a.createElement("div",{id:"sppModalBody",className:"sppModalBody"})))}}]),a}(r.Component)),bt=Object(Ze.injectIntl)(Et),yt=y.e.model("Source",{itemId:y.e.string,definition:y.e.string,term:y.e.string}),Tt=y.e.model("GlossaryData",{id:y.e.string,uuid:y.e.string,source:y.e.compose(yt)}),It=y.e.model("GlossaryHotspot",{searchResults:y.e.array(Tt)}).actions((function(e){return{fetch:function(e,t,a){var n=a.replace("-","_"),o={queryString:"*",filter:["lang:".concat(n),"indexId:".concat(t),"pageNo:".concat(e),"type:glossary"],fieldsToReturn:["term","definition","itemId","pageNo","pageOrder"]};E.f.getEventManager().publish("GLOSSARY_HOTSPOT_REQUESTED",o)},setGlossaryHotspot:function(t){Object(y.a)(e,t)}}})),St=a(544),vt=a.n(St),Ct=a(320),Ot=a(411),Pt=(a(1965),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).getAnchorElement=function(e){var t=document.getElementById("region_".concat(e));return t&&t},e.getContainerElement=function(){var e=document.getElementById("docViewer").querySelector(".fwrJspPane");return e&&e},e.getGlossaryItem=function(e){return s.a.createElement("div",{className:"glossary-content"},s.a.createElement("p",{className:"glossary-term"},vt()(e.glossaryTerm)),s.a.createElement("p",{className:"glossary-definition"},vt()(e.glossaryDefinition)))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.glossaryData,a=e.onClickAway,n=e.regionData,o=e.showGlossary,r=this.getContainerElement();return o&&s.a.createElement(Ct.a,{id:"glossary-popper",open:o,anchorEl:this.getAnchorElement(n.regionId),container:r,disablePortal:!1,modifiers:{flip:{enabled:!0,boundariesElement:r},offset:{offset:"0,10"},preventOverflow:{enabled:!0,boundariesElement:r}}},s.a.createElement(Ot.a,{onClickAway:a},this.getGlossaryItem(t)))}}]),a}(r.PureComponent));Pt.defaultProps={glossaryData:null,onClickAway:function(){},regionData:null,showGlossary:!1};var Nt,kt=Pt,_t=Object(_.b)("course","courseStatus","productToken","user","asset","assetStatus","resetTocStatus","manifestStatus","courseItems","customTocStatus","language","courseContainerState","audioBooks","audioBookStatus","pdfHotspot","glossaryHotspot")(Nt=Object(_.c)(Nt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).getConfig=function(e,t,a,o){return Object(X.a)(Object(X.a)({},n.props.course.getConfig(e,t,a)),"CITE"!==o&&{showAudio:n.props.audioBooks.isAudioBook})},n.getPdfLocale=function(){var e=n.props.course.getProduct(),t=e.configuration,a=e.getPdfLocale,o="en";return t.availableBookLanguages&&t.availableBookLanguages.length>0&&(o=a()),o},n.handleNavigationChange=function(e){var t=n.pageId,a=n.props,o=a.course,r=a.history,s=a.match,i=o.getProduct().format;if(o.getProduct().setPLAEvents(e,n.isFromCourse,t),n.pageId=e,"PDF"===i||n.serverSideEnabled){n.regionData=null,n.setState({showGlossary:!1});var c=["asset","standards","assessment","custom"];e&&e.type&&c.includes(e.type)?("custom"===e.type?n.setState({showHotspot:!1}):(n.regionData=e,n.setState({showHotspot:!0})),n.pageId=t):(e!==t&&we.disableNavigation(),n.setState({showHotspot:!1}),Ne.redirectToPage(s,r,e))}else Ne.redirectToPage(s,r,e);n.flowStarted=!0},n.handelBackNavClick=function(){var e=n.props,t=e.match.params.pageId,a=e.course,o=Ne.getQueryParameterbyName("redirectURL");a.getProduct().model===T||o?window.location="".concat(ne.CONTENT_HOST,"/bookshelf"):(a.getProduct().sendPageUnloadEvent(t,n.isFromCourse),setTimeout((function(){Ne.redirectToReturnUrl(a.isStudent)}),1e3))},n.handleSchedulerClick=function(){var e=n.props.match,t=e.url;w.EventProvider.getEventManager().dispatch({category:"Scheduled",action:"Title Click",data:{course:e.params.id}}),E.f.redirectTo("".concat(t,"#assignments"))},n.handleCustomToc=function(){n.props.course.fetchManifest()},n.handleTocPublish=function(e){e&&n.props.course.customTocPublish(e,n.props.match.params.productId)},n.handleTocCancel=function(){n.props.courseContainerState.set({showConfigToc:!1})},n.closeSuccessMsg=function(){n.props.courseContainerState.set({showSuccessMsg:!1})},n.handleTocReset=function(){var e=n.props,t=e.course,a=e.match;t.resetCustomToc(a.params.productId)},n.handleTocChange=function(e){n.isTocUpdated=e},n.handleNotesCopy=function(){var e=n.props,t=e.courseItems,a=e.match.params.productId;t.fetch(a),n.setState({isNotesCopy:!0})},n.handlePopUpToggle=function(){n.setState((function(e){return{isNotesCopy:!e.isNotesCopy}}))},n.vegaReaderLoading=function(){var e=n.props,t=e.courseStatus,a=e.assetStatus,o=e.manifestStatus,r=e.customTocStatus,s=e.resetTocStatus,i=e.audioBookStatus;return t.isPending||a.isPending||i.isPending||o.isPending||r.isPending||s.isPending},n.getCiteManifect=function(){return"CITE"===n.props.course.getProduct().format?ue.getManifest():null},n.showConfigureToc=function(){var e=n.props.courseContainerState.showConfigToc,t=n.props.course.getProduct().tocUrl;return e&&(ue.getManifest()||t)},n.showNotesCopy=function(){return n.state.isNotesCopy&&n.props.courseItems.items&&n.props.courseItems.items.length},n.fetchHotspotData=function(e){return new Promise((function(t){var a=n.props,o=a.match,r=a.pdfHotspot,s=a.asset,i=a.course,c=i.getProduct().model,l=o.params,u=l.bundleId,d=l.pageId,p=l.productId,g=u?s.children:s.slates,m=s.getPagePlaylist(u,i.getProduct(),n.serverSideEnabled);if(we.enableNavigation(),c===T){n.pageData=n.serverSideEnabled?m.find((function(e){return e.id===d})):g.find((function(t){return t.playOrder===e})),n.pageNumber=n.pageData&&n.serverSideEnabled?n.pageData.pagenumber:n.pageData&&n.pageData.pageno,r.fetch(p,n.pageNumber);var h=E.f.getEventManager().on("PDF_HOTSPOT_FETCHED",(function(){var e=r.filterHotspots(r.children,n.platformId,i.role);t(e),h()}))}}))},n.fetchClickedRegionData=function(e){var t=n.props.pdfHotspot.getHotspotData(e,n.props.glossaryHotspot);n.regionData=t.regionData,n.glossaryData=t.glossaryData,n.setState({showHotspot:"hotspot"===t.hotspotType,showGlossary:"glossary"===t.hotspotType})},n.fetchGlossaryData=function(){var e=n.props,t=e.course;e.glossaryHotspot.fetch(n.pageNumber,t.getProduct().indexId,t.getProduct().getPdfLocale())},n.handleGlossaryClose=function(){n.setState({showGlossary:!1})},n.appcuesListener=function(){window.Appcues.once("flow_started",(function(){n.setState({drawerView:{drawerState:"open",selectedPanel:"Contents"}})}))},n.appcuesTracker=function(e){e.getProduct().trackAppcuesEvent(n.appConfig,e.id,e.showScheduleIcon(),e.role)},n.initializeAppcues=function(){var e=n.props,t=e.course,a=e.user;E.f.getEventManager().on("APPCUES_USER_IDENTIFIED",(function(){n.userIdentified=!0,n.appcuesListener(),n.appcuesTracker(t)})),t.getProduct().identifyUser(a)};var o=n.props.match.params.pageId;return n.state={drawerView:{drawerState:"closed",selectedPanel:"Contents"},isNotesCopy:!1,showGlossary:!1,showHotspot:!1},n.regionData=null,n.glossaryData=null,n.pageId=o,n.isFromCourse=!0,n.isDeeplink=!0,n.platformId=Ne.getQueryParameterbyName("platformId"),n.authHandler=new lt(Object(Ke.a)(n)),n.moreMenuHandler=new dt(Object(Ke.a)(n)),n.backLinkClient=new gt(Object(Ke.a)(n)),n.userIdentified=!1,n.flowStarted=!1,n.appConfig=null,n.serverSideEnabled=!1,n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.match.params,n=a.id,o=a.productId,r=a.bundleId,s=a.pageId,i=t.course;i.fetch(n,o,r),window.sessionStorage.setItem("sourceFromInstructor",document.referrer),E.f.getEventManager().on("COURSE_DATA_FETCHED",(function(){i.getProduct().setPLAEvents(s,e.isFromCourse)}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.match,n=t.course,o=e.match.params,r=o.id,s=o.productId,i=o.bundleId;r===a.params.id&&s===a.params.productId&&i===a.params.bundleId||n.fetch(a.params.id,a.params.productId,a.params.bundleId),e.match.url!==a.url&&(!this.userIdentified||i||this.flowStarted||this.appcuesTracker(n))}},{key:"isReadyToRender",value:function(){var e=this.props,t=e.asset,a=e.course,n=e.match,o=e.productToken,r=n.params,s=r.bundleId,i=r.pageId,c=void 0===i?"":i;if(a.getProduct().model===T&&this.isDeeplink){var l=t&&we.getPlayOrder(t,s,c,this.serverSideEnabled,a.getProduct());this.pageId=l.pageId||"",l&&l.deeplink&&(this.isDeeplink=!1)}var u=o.verified&&a.id&&t.id&&(!s||c);return!u||this.userIdentified||s||this.initializeAppcues(),u}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.asset,o=a.assetStatus,i=a.customTocStatus,c=a.course,l=a.courseItems,u=a.courseStatus,d=a.courseContainerState,p=a.language,g=a.location,m=a.manifestStatus,h=a.match,y=a.resetTocStatus,I=a.user,S=h.params,v=S.bundleId,C=S.pageId,O=c.getProduct(),P=O.format,N=O.id,k=O.indexId,_=O.version,A=O.model,R=O.backLinkUrl,U=E.f.getStoreRegistry().getStore("user").smsUserId,L=A===T,D=Ne.getQueryParameterbyName("redirectURL");this.serverSideEnabled=c.getProduct().getServerSideStatus(),("PDF"===P||this.serverSideEnabled)&&(e={hotspotObj:{fetchHotspotData:this.fetchHotspotData,bookFeatures:c.getProduct().getBookFeatures(),fetchClickedRegionData:this.fetchClickedRegionData,renderGlossaryData:this.fetchGlossaryData}});var w={handleChange:this.moreMenuHandler.handleChange,menuItem:this.moreMenuHandler.getMenuItems(this.serverSideEnabled,h.params.id)};if(v&&A!==T&&(w={}),void 0===C&&v&&n.id){var M=n&&n.children.length&&n.children[0].id;L&&(M=n&&n.children.length&&n.children[0].playOrder,this.pageId=M),E.f.redirectTo("/courses/".concat(h.params.id,"/products/").concat(N,"/bundles/").concat(v,"/pages/").concat(M,"?platformId=").concat(this.platformId))}var B=this.getPdfLocale();return this.appConfig=this.getConfig(B,v,D,P),s.a.createElement(r.Fragment,null,s.a.createElement(E.d,{loading:this.vegaReaderLoading(),isError:u.isError||o.isError,error:u.error||o.error,content:this.isReadyToRender()&&s.a.createElement(r.Fragment,null,s.a.createElement(b.Consumer,null,(function(a){return L&&a.onLocaleChange(B),s.a.createElement(tt.VegaReader,{courseId:h.params.id,bookId:c.getProduct().id,businessModelCode:c.getProduct().getBusinessModelCode(),tocData:L?n.getAssetTocPdf(v,c.role,t.serverSideEnabled):n,pagePlaylist:n.getPagePlaylist(v,c.getProduct(),t.serverSideEnabled),pdfCallbacks:e,contentType:t.serverSideEnabled?"SPDF":P,pageId:L?t.pageId:C,onBackNavClick:t.handelBackNavClick,onNavigationChange:t.handleNavigationChange,authHandler:t.authHandler.get("CourseContainer"),env:ne.ENVIRONMENT,basePath:c.getBasePath(),indexId:k,versionUrn:_,config:t.getConfig(B,v,D,P),bookInfo:c.getBookInfo(),onTocEdit:t.handleCustomToc,onNotesCopy:t.handleNotesCopy,moreMenuData:w,backLinkClient:t.backLinkClient,drawerView:t.state.drawerView,menuIconsStart:c.showScheduleIcon()&&s.a.createElement(f.Tooltip,{id:"menu-schedule-tooltip",title:p.getMessage("menu.tooltip.SCHEDULE"),placement:"bottom"},s.a.createElement(Je.a,{id:"menu-schedule-button",color:"inherit",onClick:t.handleSchedulerClick},s.a.createElement(f.Icon,{id:"menu-schedule-icon",name:"CalendarOutlined",fontSize:"large",color:"inherit"})))})})),this.showNotesCopy()&&s.a.createElement(et.NotesCopyComponent,{spectrumXCaller:c.getProduct().isPxe()?ne.PXE_X_CALLER:ne.CITE_X_CALLER,userId:I.id,spectrumClient:E.f.getClientManager().get("spectrum"),popUpOpen:this.state.isNotesCopy,courseItems:l.getData(h.params.id),toggleShowPopUp:this.handlePopUpToggle,locale:p.currentLanguage}),this.state.showHotspot&&s.a.createElement(bt,{basePath:R,goToPageNumber:this.handleNavigationChange,isStudent:c.isStudent,productId:h.params.id,regionData:this.regionData,userId:U,pagePlaylist:n.getPagePlaylist(v,c.getProduct(),this.serverSideEnabled)}),this.state.showGlossary&&s.a.createElement(kt,{glossaryData:this.glossaryData,onClickAway:this.handleGlossaryClose,regionData:this.regionData,showGlossary:this.state.showGlossary})),loadingContent:s.a.createElement(j.a,{className:"circleStyle"}),errorContent:s.a.createElement(E.c,{errorCode:"GENERIC"})}),s.a.createElement(E.d,{loading:m.isPending,isError:m.isError,error:m.error,content:this.showConfigureToc()&&s.a.createElement($e.ConfigureTocComponent,{citeManifest:this.getCiteManifect(),dropLevelType:"WITH_IN_SAME_LEVEL",tocContents:ue.tocData(n.children,c.id).tocData.list,tocLevel:4,dndType:"TableOfContents",onPublish:this.handleTocPublish,onCancel:this.handleTocCancel,onResetTocContent:this.handleTocReset,onTocChange:this.handleTocChange,locale:p.currentLanguage,intl:this.props.intl,listenBrowserEvents:!0,openCustomiseToc:!0}),loadingContent:s.a.createElement(j.a,{className:"circleStyle"}),errorContent:s.a.createElement(E.c,{errorCode:"GENERIC"})}),"#assignments"===g.hash&&s.a.createElement(ct,Object.assign({onNavigationChange:this.handleNavigationChange},this.props)),s.a.createElement(E.d,{loading:i.isPending||y.isPending,isError:i.isError,content:d.showSuccessMsg&&s.a.createElement(ut,{showSuccessMsg:d.showSuccessMsg,onClose:this.closeSuccessMsg,language:p}),loadingContent:s.a.createElement(j.a,{className:"circleStyle"}),errorContent:s.a.createElement(E.c,{errorCode:"GENERIC"})}))}}]),a}(r.PureComponent))||Nt)||Nt,At=Object(Ze.injectIntl)(_t),jt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"GLOSSARY_HOTSPOT_REQUESTED","GlossaryHotspotService")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){var a={headers:{"application-id":"etext1"}};return this.getClient("csg").post("/search",t,a)}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("glossaryHotspot").setGlossaryHotspot(e.data)}}]),a}(E.a),Rt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"PDF_HOTSPOT_REQUESTED","PdfHotspotStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){return this.getClient("prism").get("/contenttoc/v1/assets/hotspot?productId=".concat(t.productId,"&pageNo=").concat(t.pageId))}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("pdfHotspot").setPdfHotspot(e.data[0])}}]),a}(E.a);E.f.getClientManager().add({name:"marin",authHeader:"authorization",timeout:ne.MARIN_API_TIMEOUT,baseUrl:ne.MARIN_API_BASE_URL,tokenPrefix:"Bearer "}).add({name:"prism",authHeader:"x-authorization",timeout:ne.PRISM_API_TIMEOUT,baseUrl:ne.PRISM_API_BASE_URL,tokenPrefix:""}).add({name:"stpaper",authHeader:"x-authorization",timeout:ne.STPAPER_API_TIMEOUT,baseUrl:ne.STPAPER_API_BASE_URL,tokenPrefix:""}).add({name:"spectrum",authHeader:"x-authorization",timeout:ne.SPECTRUM_API_TIMEOUT,baseUrl:ne.SPECTRUM_API_BASE_URL,tokenPrefix:""}).add({name:"idc",authHeader:"x-authorization",timeout:ne.IDC_API_TIMEOUT,baseUrl:ne.IDC_API_BASE_URL,addCorrelationId:!1,tokenPrefix:""}).add({name:"etext",authHeader:"x-authorization",timeout:ne.ETEXT_API_TIMEOUT,baseUrl:ne.ETEXT_API_BASE_URL,tokenPrefix:""}).add({name:"audioBook",authHeader:"x-authorization",timeout:ne.AUDIO_BOOK_API_TIMEOUT,baseUrl:ne.AUDIO_BOOK_API_BASE_URL,tokenPrefix:""}).add({name:"csg",authHeader:"x-authorization",timeout:ne.CSG_API_TIMEOUT,baseUrl:ne.CSG_API_BASE_URL,tokenPrefix:""});var Ut,Lt,Dt={path:["/courses/:id","/courses/:id/contents","/courses/:id/pages/:pageId?","/courses/:id/products/:productId","/courses/:id/products/:productId/pages/:pageId?","/courses/:id/products/:productId/bundles/:bundleId","/courses/:id/products/:productId/bundles/:bundleId/pages/:pageId?"],exact:!0,services:[new ie,new ce,new le,new de,new pe,new ge,new he,new fe,new se,new Rt,new jt],stores:[{name:"course",spec:Le,saveLocally:!1,initialState:{id:"",courseId:"",title:"",code:"",organizationId:"",source:"",key:"",role:"",platform:"",status:"",isStudent:!1,startDate:0,endDate:0,products:[{authors:[{firstName:"",lastName:"",otherName:""}],audioBook:"",basePath:"",catalogUrl:"",format:"",id:"",indexId:"",isSumatra:!1,mathmlOn:!0,mobileReady:!1,model:"",platform:"",status:"",thumbnailUrl:"",title:"",version:"",subscription:{allowAccess:!1,businessModelCode:"",endDate:0,startDate:0,type:""}}]}},{name:"asset",spec:He,saveLocally:!1,initialState:{id:"",title:"",code:"",playOrder:"0",productId:"",children:[{title:"",id:"",type:"",playOrder:"0",sectionType:""}]}},{name:"pdfHotspot",spec:ht,saveLocally:!1,initialState:{id:"",title:"",productId:"",updatedTime:"",pageNo:"",serverCreationTime:"",children:[{regionId:"",regionTypeId:"",pageNo:"",name:"",glossary:"",imageUri:"",linkUri:"",linkType:"",x:"",y:"",width:"",height:"",linkTypeId:"",transparent:!1,isIcon:"",platformId:0}]}},{name:"assignments",spec:qe,saveLocally:!1,initialState:{scheduledList:[{id:"",title:"",dueDate:0,status:"",state:"",showScores:!1,points:0,percentage:0,pointsEarned:0,lastUpdatedTime:0,availabilityDate:0,ctrld_acs_actvty:!1,children:[{id:"",title:"",uri:""}]}]}},{name:"courseItems",spec:ze,saveLocally:!1,initialState:{items:[{annotationExists:!1,contextId:"",courseName:""}]}},{name:"courseContainerState",spec:We,saveLocally:!1,initialState:{showConfigToc:!1,showSuccessMsg:!1}},{name:"audioBooks",spec:Ee,saveLocally:!1,initialState:{isAudioBook:!1}},{name:"glossaryHotspot",spec:It,saveLocally:!1,initialState:{searchResults:[]}}],render:function(e){return s.a.createElement(At,e)}},wt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.location.replace(ne.CONSOLE_URL)}},{key:"render",value:function(){return null}}]),a}(r.PureComponent),Mt={path:"/",exact:!0,services:[],stores:[],render:function(){return s.a.createElement(wt,null)}},Bt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this,"PAGE_SEQUENCE_ASSET_REQUESTED")).pageId="",e}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){var a=t.id,n=t.productId,o=a?"&id=".concat(a):"";return this.getClient("prism").get("/contenttoc/v1/assets?productId=".concat(n).concat(o))}},{key:"redirectToDigitalPage",value:function(e,t,a,n){e?E.f.redirectTo("/courses/".concat(e,"/products/").concat(t,"/pages/").concat(a).concat(n)):E.f.redirectTo("/products/".concat(t,"/pages/").concat(a).concat(n))}},{key:"handleResponse",value:function(e,t){var a=t.id,n=t.productId,o=t.pageNumber,r=t.queryParams,s=e.data.children,i=s&&s.length&&s[0].id;o&&E.e.treeWalk(s,null,"children",-1,(function(e){return e.playOrder!==o||(i=e.id,!1)})),this.redirectToDigitalPage(a,n,i,r)}}]),a}(E.a),xt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.history,n=t.params,o=n.id,r=n.productId,s=n.pageNumber,i=Ne.getQueryParameterbyName("printPage"),c=a.location.search;i?o?E.f.redirectTo("/courses/".concat(o,"/products/").concat(r).concat(c)):E.f.redirectTo("/products/".concat(r).concat(c)):E.f.getEventManager().publish("PAGE_SEQUENCE_ASSET_REQUESTED",{id:o,productId:r,pageNumber:s,queryParams:c})}},{key:"render",value:function(){return s.a.createElement(r.Fragment,null,s.a.createElement(j.a,{className:"circleStyle"}))}}]),a}(s.a.Component),Ft={path:["/courses/:id/products/:productId/page-sequences/:pageNumber?","/products/:productId/page-sequences/:pageNumber?"],exact:!1,services:[new Bt],stores:[],render:function(e){return s.a.createElement(xt,e)}},Ht=a(1116),Gt=Object(_.b)("language")(Ut=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.language;return s.a.createElement(r.Fragment,null,s.a.createElement(Ht.PrintPageComponent,{locale:e.currentLanguage}))}}]),a}(s.a.Component))||Ut,Vt=Object(Ze.injectIntl)(Gt),zt={path:["/print"],exact:!0,services:[],stores:[],render:function(e){return s.a.createElement(Vt,e)}},Wt=Object(_.b)("product","productStatus","user","asset","productToken","assetStatus","audioBooks","audioBookStatus","pdfHotspot","glossaryHotspot","language")(Lt=Object(_.c)(Lt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).getConfig=function(e,t,a){return Object(X.a)(Object(X.a)({},n.props.product.getConfig(e,t)),"CITE"!==a&&{showAudio:n.props.audioBooks.isAudioBook})},n.getPdfLocale=function(){var e=n.props.product,t=e.configuration,a=e.getPdfLocale,o="en";return t.availableBookLanguages&&t.availableBookLanguages.length>0&&(o=a()),o},n.handleNavigationChange=function(e){var t=n.pageId,a=n.props,o=a.match,r=a.product,s=a.history;if(r.setPLAEvents(e,n.isFromCourse,t),n.pageId=e,"PDF"===r.format||n.serverSideEnabled){n.regionData=null,n.setState({showGlossary:!1});var i=["asset","standards","assessment","custom"];e&&e.type&&i.includes(e.type)?("custom"===e.type?n.setState({showHotspot:!1}):(n.regionData=e,n.setState({showHotspot:!0})),n.pageId=t):(e!==t&&we.disableNavigation(),n.setState({showHotspot:!1}),Ne.redirectToPage(o,s,e))}else Ne.redirectToPage(o,s,e);n.flowStarted=!0},n.handelBackNavClick=function(){var e=n.props,t=e.match.params.pageId,a=e.product,o=a.model===T,r=Ne.getQueryParameterbyName("redirectURL")?"".concat(ne.CONTENT_HOST,"/bookshelf"):ne.CONSOLE_URL;o||a.sendPageUnloadEvent(t,n.isFromCourse),setTimeout((function(){window.location=r}),1e3)},n.fetchHotspotData=function(e){return new Promise((function(t){var a=n.props,o=a.match,r=a.pdfHotspot,s=a.asset,i=a.product,c=o.params,l=c.id,u=c.bundleId,d=c.pageId,p=u?s.children:s.slates,g=s.getPagePlaylist(u,i,n.serverSideEnabled),m=i.bookID||l;we.enableNavigation(),n.pageData=n.serverSideEnabled?g.find((function(e){return e.id===d})):p.find((function(t){return t.playOrder===e})),n.pageNumber=n.pageData&&n.serverSideEnabled?n.pageData.pagenumber:n.pageData&&n.pageData.pageno,r.fetch(m,n.pageNumber);var h=E.f.getEventManager().on("PDF_HOTSPOT_FETCHED",(function(){var e=r.filterHotspots(r.children,n.platformId,v.STUDENT);t(e),h()}))}))},n.fetchClickedRegionData=function(e){var t=n.props.pdfHotspot.getHotspotData(e,n.props.glossaryHotspot);n.regionData=t.regionData,n.glossaryData=t.glossaryData,n.setState({showHotspot:"hotspot"===t.hotspotType,showGlossary:"glossary"===t.hotspotType})},n.fetchGlossaryData=function(){var e=n.props,t=e.glossaryHotspot,a=e.product;t.fetch(n.pageNumber,a.indexId,a.getPdfLocale())},n.handleGlossaryClose=function(){n.setState({showGlossary:!1})},n.appcuesListener=function(){window.Appcues.once("flow_started",(function(){n.setState({drawerView:{drawerState:"open",selectedPanel:"Contents"}})}))},n.appcuesTracker=function(e){e.trackAppcuesEvent(n.appConfig)},n.initializeAppcues=function(){var e=n.props,t=e.user,a=e.product;E.f.getEventManager().on("APPCUES_USER_IDENTIFIED",(function(){n.userIdentified=!0,n.appcuesListener(),n.appcuesTracker(a)})),a.identifyUser(t)};var o=n.props.match.params.pageId;return n.pageId=o,n.isFromCourse=!1,n.authHandler=new lt(Object(Ke.a)(n)),n.moreMenuHandler=new dt(Object(Ke.a)(n)),n.regionData=null,n.glossaryData=null,n.isDeeplink=!0,n.platformId=Ne.getQueryParameterbyName("platformId"),n.userIdentified=!1,n.flowStarted=!1,n.appConfig=null,n.serverSideEnabled=!1,n.state={drawerView:{drawerState:"closed",selectedPanel:"Contents"},showGlossary:!1,showHotspot:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params,a=t.id,n=t.bundleId,o=t.pageId,r=e.product,s=e.asset;r.fetch(a,n),s.fetch(a,null,n),r.setPLAEvents(o,this.isFromCourse)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.match,n=t.product,o=t.asset,r=a.params,s=r.id,i=r.bundleId;e.match.params.id!==s&&(n.fetch(s,i),o.fetch(s,null,i)),e.match.url!==a.url&&(!this.userIdentified||i||this.flowStarted||this.appcuesTracker(n))}},{key:"isReadyToRender",value:function(){var e=this.props,t=e.asset,a=e.product,n=e.productToken,o=e.match.params,r=o.pageId,s=void 0===r?"":r,i=o.bundleId;if("PDF"===a.format&&this.isDeeplink){var c=t&&we.getPlayOrder(t,i,s,this.serverSideEnabled,a);this.pageId=c.pageId||"",c&&c.deeplink&&(this.isDeeplink=!1)}var l=n.verified&&a.id&&t.id&&(!i||s);return!l||this.userIdentified||i||this.initializeAppcues(),l}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.asset,o=a.assetStatus,i=a.audioBookStatus,c=a.match,l=a.product,u=a.productStatus,d=(a.user,c.params),p=d.bundleId,g=d.id,m=d.pageId,h=l.format,f=l.indexId,y=l.version,I=l.model,S=l.backLinkUrl,C=E.f.getStoreRegistry().getStore("user").smsUserId,O=I===T,P=v.STUDENT;this.serverSideEnabled=l.getServerSideStatus(),(O||this.serverSideEnabled)&&(e={hotspotObj:{fetchHotspotData:this.fetchHotspotData,bookFeatures:this.props.product.getBookFeatures(),fetchClickedRegionData:this.fetchClickedRegionData,renderGlossaryData:this.fetchGlossaryData}});var N={handleChange:this.moreMenuHandler.handleChange,menuItem:this.moreMenuHandler.getMenuItems(this.serverSideEnabled)};if(p&&I!==T&&(N={}),void 0===m&&p&&n.id){var k=n&&n.children.length&&n.children[0].id;O&&(k=n&&n.children.length&&n.children[0].playOrder,this.pageId=k),E.f.redirectTo("/products/".concat(g,"/bundles/").concat(p,"/pages/").concat(k,"?platformId=").concat(this.platformId))}var _=this.getPdfLocale();return this.appConfig=this.getConfig(_,p,h),s.a.createElement(E.d,{loading:u.isPending||o.isPending||i.isPending,isError:u.isError||o.isError,error:u.error||o.error,content:this.isReadyToRender()&&s.a.createElement(r.Fragment,null,s.a.createElement(b.Consumer,null,(function(a){return O&&a.onLocaleChange(_),s.a.createElement(tt.VegaReader,{bookId:l.id,businessModelCode:l.getBusinessModelCode(),tocData:O?n.getAssetTocPdf(p,P,t.serverSideEnabled):n,pagePlaylist:n.getPagePlaylist(p,l,t.serverSideEnabled),contentType:t.serverSideEnabled?"SPDF":h,pdfCallbacks:e,pageId:O?t.pageId:m,onBackNavClick:t.handelBackNavClick,onNavigationChange:t.handleNavigationChange,authHandler:t.authHandler.get("ProductContainer"),env:ne.ENVIRONMENT,basePath:l.getBasePath(),indexId:f,versionUrn:y,config:t.getConfig(_,p,h),bookInfo:l.getBookInfo(),moreMenuData:N,drawerView:t.state.drawerView})})),this.state.showHotspot&&s.a.createElement(bt,{basePath:S,goToPageNumber:this.handleNavigationChange,isStudent:!0,productId:l.id,regionData:this.regionData,userId:C,pagePlaylist:n.getPagePlaylist(p,l,this.serverSideEnabled)}),this.state.showGlossary&&s.a.createElement(kt,{glossaryData:this.glossaryData,onClickAway:this.handleGlossaryClose,regionData:this.regionData,showGlossary:this.state.showGlossary})),loadingContent:s.a.createElement(j.a,{className:"circleStyle"}),errorContent:s.a.createElement(E.c,{errorCode:"GENERIC"})})}}]),a}(r.PureComponent))||Lt)||Lt,Yt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"PRODUCT_SYNC_REQUESTED","productStatus")}return Object(u.a)(a,[{key:"handleEvent",value:function(e,t){var a=null;return t.bundleId&&(a={headers:{"bundle-id":t.bundleId}}),this.getClient("marin").get("/products/".concat(t.id),a)}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("product").set(e.data)}}]),a}(E.a),Qt=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.call(this,"PRODUCT_TOKEN_REQUESTED")}return Object(u.a)(a,[{key:"mapResponse",value:function(e){var t=e.data,a=t.name,n=t.value,o=n.indexOf("="),r=n.indexOf("~"),s=o>=0&&r>o?1e3*n.substring(o+1,r):0;return{id:this.id,name:a,value:n,expirationTime:s,verified:!0}}},{key:"handleEvent",value:function(e,t){return this.id=t.id,this.getClient("marin").get("/products/".concat(t.id,"/token"))}},{key:"handleResponse",value:function(e){E.f.getStoreRegistry().getStore("productToken").set(this.mapResponse(e))}}]),a}(E.a),Xt=[re,Dt,Mt,Ft,zt,{path:["/products/:id","/products/:id/contents","/products/:id/pages/:pageId","/products/:id/bundles/:bundleId","/products/:id/bundles/:bundleId/pages/:pageId?"],exact:!0,services:[new Yt,new Qt],stores:[{name:"product",spec:Re,saveLocally:!1,initialState:{authors:[{firstName:"",lastName:"",otherName:""}],audioBook:"",basePath:"",backLinkUrl:"",bookID:"",catalogUrl:"",coverThumbnailUrl:"",format:"",id:"",indexId:"",isSumatra:!1,mathmlOn:!0,mobileReady:!1,model:"",platform:"",status:"",thumbnailUrl:"",title:"",version:"",subscription:{allowAccess:!1,businessModelCode:"",endDate:0,startDate:0,type:""},serversideProcessed:!1,serversideEnabled:!1,serverSideUuid:""}},{name:"productToken",spec:at,saveLocally:!0,initialState:{id:"",name:"",value:"",expiryTime:0,verified:!1},init:function(e){e.setVerified(!1)}}],render:function(e){return s.a.createElement(Wt,e)}}],qt={"bookshelf.TITLE":"My Bookshelf","common.LOGOUT":"Logout","common.GO_HOME":"Go Home","common.PURCHASE":"Purchase","courses.WELCOME":"Hello {userName}, welcome to your {courseName} course!","courses.action.SHOW_ASSIGNMENTS":"Show Assignments","courses.toc.PUBLISH_SUCCESS":"Success!","courses.toc.PUBLISH_MESSAGE":"Students will see your changes the next time they open content.","errors.SUBSCRIPTION_GENERIC_TITLE":"Subscription Not Found","errors.SUBSCRIPTION_GENERIC_DESC":"Your account does not include access to this title. If you think you have\n    received this message in error please contact Pearson Technical Support","errors.SUBSCRIPTION_REGISTRATION_TITLE":"Subscription Not Found","errors.SUBSCRIPTION_REGISTRATION_DESC":"Your subscription does not include access to the eText, however you can\n    subscribe to it right now using a credit card.","product.WELCOME":"Hello {userName}","menu.CONTACT_SUPPORT":"Contact Support","menu.ABOUT":"About","menu.ACCESSIBILITY":"Accessibility","menu.FOXIT":"Powered by FoxIT","menu.TERMS_OF_USE":"Terms of use","menu.PRIVACY_POLICY":"Privacy Policy","menu.SIGN_OUT":"Sign Out","menu.PRINT_PAGE":"Print page","menu.GET_LOOSE_LEAF":"Get loose leaf","menu.AVAILABLE":"Also Available","menu.PRINT_VERSION":"Want the printed version?","menu.COPY_RIGHT":"Copyright \xa9 {year} Pearson Education Inc. All Rights Reserved.","menu.tooltip.SCHEDULE":"Schedule","foxit.ABOUT":"About","foxit.COPY_RIGHT":"PDF Reader Powered by Foxit. Copyright (C) 2003-2019 by Foxit Software Incorporate","link.SUPPORT":"https://support.pearson.com/getsupport/s/?_ga=2.116082310.1845539610.1557867919-NimtqV7BcT00BM9xOXCQUFJYwF3RzEIk","link.ACCESSIBILITY":"https://www.pearson.com/us/accessibility.html","print.FOOTER_MESSAGE":"Printed by {fullName}({email}) on {currentDate}.","print.WATERMARK":"Copyright \xa9 2019 Pearson Education"},Kt={"bookshelf.title":"Ma biblioth\xe8que","common.LOGOUT":"D\xe9connexion","common.GO_HOME":"Aller page d'accueil","common.PURCHASE":"Acheter","home.action.GOTO_COURSE":"Aller au cours","courses.WELCOME":"Bonjour {userName}, bienvenue dans votre cours {courseName}!","courses.toc.PUBLISH_SUCCESS":"Succ\xe8s!","courses.toc.PUBLISH_MESSAGE":"Les \xe9tudiants verront vos modifications la prochaine fois quils ouvriront du contenu.","errors.SUBSCRIPTION_GENERIC_TITLE":"Abonnement introuvable","errors.SUBSCRIPTION_GENERIC_DESC":"Votre compte ne permet pas l'acc\xe8s \xe0 ce titre. Si vous pensez avoir re\xe7u ce message par erreur veuillez contacter le support technique.","errors.SUBSCRIPTION_REGISTRATION_TITLE":"Abonnement introuvable","errors.SUBSCRIPTION_REGISTRATION_DESC":"Votre abonnement n'inclut pas l'acc\xe8s au eText, mais vous pouvez l'obtenir d\xe8s maintenant en utilisant une carte de cr\xe9dit.","product.WELCOME":"Bonjour {userName}","menu.CONTACT_SUPPORT":'Contacter l"assistance',"menu.ABOUT":"\xc0 propos","menu.ACCESSIBILITY":"Accessibilit\xe9","menu.FOXIT":"Optimis\xe9 par FoxIT","menu.TERMS_OF_USE":'Conditions d"utilisations',"menu.PRIVACY_POLICY":"Politique de confidentialit\xe9","menu.SIGN_OUT":"Se d\xe9connecter","menu.PRINT_PAGE":"Imprimer la page","menu.GET_LOOSE_LEAF":"Obtenir le manuel en format feuilles mobiles","menu.AVAILABLE":"\xc9galement disponible","menu.PRINT_VERSION":'Besoin d"une version imprim\xe9e?',"menu.COPY_RIGHT":"Copyright \xa9 {year} Pearson Education Inc. Tous droits r\xe9serv\xe9s.","menu.tooltip.SCHEDULE":"Programme","foxit.ABOUT":"\xc0 propos","foxit.COPY_RIGHT":"Liseuse PDF optimis\xe9 par Foxit. Copyright (C) 2003-2019 par Foxit Software Incorporated","link.SUPPORT":"https://pearsonerpi.com/aide","link.ACCESSIBILITY":"https://www.pearson.com/us/accessibility.html","print.FOOTER_MESSAGE":"Imprim\xe9 par {firstName} {lastName} ({userEmailId}) le {currDate}.","print.WATERMARK":"Droit d'auteur \xa9 2019 Pearson Education"},Zt={"bookshelf.title":"Il mio libretto","common.LOGOUT":"Disconnessione","common.GO_HOME":"Vai alla pagina iniziale","common.PURCHASE":"Acquista","courses.WELCOME":"Buongiorno {userName}, benvenuto al tuo corso {courseName}!","courses.toc.PUBLISH_SUCCESS":"Successo!","courses.toc.PUBLISH_MESSAGE":"Gli studenti vedranno le tue modifiche la prossima volta che apriranno i contenuti.","errors.SUBSCRIPTION_GENERIC_TITLE":"Sottoscrizione non trovata","errors.SUBSCRIPTION_GENERIC_DESC":"Il tuo account non pu\xf2 accedere a questo titolo. Se pensi di aver ricevuto questo\n    messaggio per sbaglio, contatta l\u2019Assistenza tecnica Pearson.","errors.SUBSCRIPTION_REGISTRATION_TITLE":"Sottoscrizione non trovata","errors.SUBSCRIPTION_REGISTRATION_DESC":"La tua sottoscrizione non include l\u2019accesso al testo. Tuttavia, puoi registrarti\n    adesso usando una carta di credito.","product.WELCOME":"Buongiorno {userName}","menu.CONTACT_SUPPORT":"Contatta l\u2019Assistenza","menu.ABOUT":"Info","menu.ACCESSIBILITY":"Accessibilit\xe0","menu.FOXIT":"Offerto da Foxit","menu.TERMS_OF_USE":"Termini di utilizzo","menu.PRIVACY_POLICY":"Informativa sulla privacy","menu.SIGN_OUT":"Disconnettiti","menu.PRINT_PAGE":"Stampa pagina","menu.GET_LOOSE_LEAF":"Ottieni versione con pagine sfuse","menu.AVAILABLE":"Anche disponibile","menu.PRINT_VERSION":"Vuoi la versione stampata?","menu.COPY_RIGHT":"Copyright \xa9 {year} Pearson Education Inc. Tutti i diritti riservati","menu.tooltip.SCHEDULE":"Programmazione","foxit.ABOUT":"Info","foxit.COPY_RIGHT":"Lettore PDF alimentato da Foxit. Copyright (C) 2003-2019 di Foxit Software Incorporated","link.SUPPORT":"https://support.pearson.com/getsupport/s/?_ga=2.116082310.1845539610.1557867919-NimtqV7BcT00BM9xOXCQUFJYwF3RzEIk","link.ACCESSIBILITY":"https://www.pearson.com/us/accessibility.html","print.FOOTER_MESSAGE":"Stampato da {fullName}({email}) il {currentDate}.","print.WATERMARK":"Copyright \xa9 2019 Pearson Education"},Jt=[{locale:"en",messages:qt},{locale:"en-us",messages:qt},{locale:"fr",messages:Kt},{locale:"fr-ca",messages:{"bookshelf.title":"Ma biblioth\xe8que","common.LOGOUT":"D\xe9connexion","common.GO_HOME":"Retour \xe0 l'accueil","common.PURCHASE":"Acheter","home.action.GOTO_COURSE":"Aller au cours","courses.WELCOME":"Bonjour {userName}, bienvenue dans votre cours {courseName}!","courses.toc.PUBLISH_SUCCESS":"R\xe9ussite!","courses.toc.PUBLISH_MESSAGE":"Les \xe9tudiants apercevront les modifications la prochaine fois qu'ils ouvriront le contenu.","errors.SUBSCRIPTION_GENERIC_TITLE":"L'abonnement n'a pu \xeatre trouv\xe9.","errors.SUBSCRIPTION_GENERIC_DESC":"Votre compte ne permet pas l'acc\xe8s \xe0 ce titre. Si vous pensez avoir re\xe7u ce message par erreur veuillez contacter le support technique.","errors.SUBSCRIPTION_REGISTRATION_TITLE":"L'abonnement n'a pu \xeatre trouv\xe9.","errors.SUBSCRIPTION_REGISTRATION_DESC":"Votre abonnement ne comprend pas l'acc\xe8s au eText, vous pouvez toutefois vous abonner \xe0 celui-ci \xe0 l'aide de votre carte de cr\xe9dit.","product.WELCOME":"Bonjour {userName}","menu.CONTACT_SUPPORT":"Communiquer avec le Soutien","menu.ABOUT":"\xc0 propos","menu.ACCESSIBILITY":"Accessibilit\xe9","menu.FOXIT":"Optimis\xe9 par FoxIT","menu.TERMS_OF_USE":'Conditions d"utilisations',"menu.PRIVACY_POLICY":"Politique de confidentialit\xe9","menu.SIGN_OUT":"Se d\xe9connecter","menu.PRINT_PAGE":"Imprimer la page","menu.GET_LOOSE_LEAF":"Obtenir une feuille mobile","menu.AVAILABLE":"\xc9galement disponible","menu.PRINT_VERSION":"Vous souhaitez obtenir la version imprim\xe9e?","menu.COPY_RIGHT":"Copyright \xa9 {year} Pearson Education Inc. Tous droits r\xe9serv\xe9s.","menu.tooltip.SCHEDULE":"\xc0 l'agenda","foxit.ABOUT":"\xc0 propos","foxit.COPY_RIGHT":"Liseuse PDF optimis\xe9 par Foxit. Copyright (C) 2003-2019 par Foxit Software Incorporated","link.SUPPORT":"https://pearsonerpi.com/aide","link.ACCESSIBILITY":"https://www.pearson.com/us/accessibility.html","print.FOOTER_MESSAGE":"Imprim\xe9 par {firstName} {lastName} ({userEmailId}) le {currDate}.","print.WATERMARK":"Droit d'auteur \xa9 2019 Pearson Education"}},{locale:"fr-fr",messages:Kt},{locale:"it",messages:Zt},{locale:"it-it",messages:Zt}],$t=(a(1986),E.f.getIntlBuilder()),ea=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).handleLocaleChange=function(e){$t.setDefaultLang(e).addPseudoLocale(ne.PSEUDO_LOCALE_CODE).build(),n.setState({locale:e})};var o=Object(g.parse)(window.location.search),r="en",s=o.locale&&Jt.find((function(e){return e.locale===o.locale}));o.locale&&s&&(r=o.locale),n.state={locale:r},Jt.forEach((function(e){return $t.add(e.locale,e.messages)})),$t.setDefaultLang(r).addPseudoLocale(ne.PSEUDO_LOCALE_CODE).build();var i=E.f.getModuleBuilder();return Xt.length>0&&(Xt.forEach((function(e){return i.add(e)})),Xt.length=0,n.modules=i.build()),n}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement(m.a,{theme:Object(h.a)(f.default)},s.a.createElement(b.Provider,{value:{onLocaleChange:this.handleLocaleChange,locale:this.state.locale}},s.a.createElement(E.b,{authClientId:ne.CLIENT_ID,browserLocale:!1,browserRequirementsUrl:ne.BROWSER_REQUIREMENTS_URL,correlationIdPrefix:"GVET",gtmArgs:{gtmId:ne.GTM_CONTAINER_ID,auth:ne.GTM_AUTH,preview:ne.GTM_PREVIEW,dataLayer:{businessModelCode:"",userId:""}},modules:this.modules,product:ne.PRODUCT,partnerEnv:ne.PARTNER_ENV,partnerEnvConfig:{USER_PROFILE_BASE_URL:ne.MARIN_API_BASE_URL},version:"1.0.7"})))}}]),a}(r.PureComponent);c.a.render(s.a.createElement(ea,null),document.getElementById("root"))}},[[1132,1,2]]]);
//# sourceMappingURL=main.b1b109de.chunk.js.map